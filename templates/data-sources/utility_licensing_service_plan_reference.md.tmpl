---
page_title: "{{.Name}} {{.Type}} - {{.ProviderName}}"
subcategory: "Utility"

description: |-
{{ .Description | plainmarkdown | trimspace | prefixlines "  " }}
---

# {{.Name}}

Queries Microsoft 365 licensing service plan reference data to find license products (SKUs) and service plans using human-readable names, GUIDs, or string IDs.

This utility datasource provides access to Microsoft's official licensing reference data, allowing you to dynamically look up license SKU GUIDs without hardcoding them in your Terraform configurations. This is particularly useful for license assignment operations where you need the `skuId` but want to use human-readable identifiers.

## Background

Microsoft 365 licenses are identified in three ways:

- **Product Name**: The human-readable name displayed in admin portals (e.g., "Microsoft 365 E3")
- **String ID**: Used by PowerShell v1.0 cmdlets and the `skuPartNumber` property in Microsoft Graph API (e.g., "ENTERPRISEPACK")
- **GUID**: Used by the `skuId` property in Microsoft Graph API (e.g., "6fd2c87f-b296-42f0-b197-1e91e994b900")

Each license product includes multiple service plans (individual Microsoft 365 services like Exchange Online, Teams, SharePoint, etc.). This datasource allows you to:

1. Search for products by name and retrieve their identifiers
2. Look up specific products by String ID or GUID
3. Find which products include specific service plans
4. Discover relationships between licenses and their included services

The data is automatically kept up-to-date through a weekly automated pipeline that fetches the latest information from Microsoft's official documentation.

## Search Modes

The datasource supports six search modes. **Exactly one** search parameter must be specified:

### Product Search
- **`product_name`**: Case-insensitive partial match (e.g., "Microsoft 365 E3" finds all E3 variants)
- **`string_id`**: Exact match by String ID (e.g., "ENTERPRISEPACK")
- **`guid`**: Exact match by Product GUID

### Service Plan Search
- **`service_plan_name`**: Case-insensitive partial match (e.g., "Exchange Online")
- **`service_plan_id`**: Case-insensitive partial match (e.g., "EXCHANGE")
- **`service_plan_guid`**: Exact match by Service Plan GUID

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.37.0-alpha | Experimental | Initial release |

## Example Usage

### Basic License Lookup

{{ tffile "examples/data-sources/microsoft365_utility_licensing_service_plan_reference/datasource.tf" }}

### License Assignment with Dynamic Lookup

{{ tffile "examples/data-sources/microsoft365_utility_licensing_service_plan_reference/search_by_string_id.tf" }}

### Find Products Containing Specific Service Plans

{{ tffile "examples/data-sources/microsoft365_utility_licensing_service_plan_reference/search_service_plans.tf" }}

### Practical Example: Complete User License Assignment

{{ tffile "examples/data-sources/microsoft365_utility_licensing_service_plan_reference/practical_license_lookup.tf" }}

## Additional Resources

- [Microsoft Licensing Service Plan Reference](https://learn.microsoft.com/en-us/entra/identity/users/licensing-service-plan-reference)
- [Microsoft Graph API - subscribedSku Resource Type](https://learn.microsoft.com/en-us/graph/api/resources/subscribedsku)
- [Assign Licenses to Users (Microsoft Graph)](https://learn.microsoft.com/en-us/graph/api/user-assignlicense)
- [Group-Based Licensing in Microsoft Entra ID](https://learn.microsoft.com/en-us/entra/identity/users/licensing-groups-assign)


