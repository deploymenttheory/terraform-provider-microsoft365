---
page_title: "{{.Name}} {{.Type}} - {{.ProviderName}}"
subcategory: "Device Management"
description: |-
{{ .Description | plainmarkdown | trimspace | prefixlines "  " }}
---

# {{.Name}} ({{.Type}})

{{ .Description }}

This ephemeral resource allows you to import Windows Autopilot devices from a CSV file. Unlike regular resources, ephemeral resources are not stored in the Terraform state file, making them ideal for one-time import operations.

The CSV file must be in ANSI format with no quotation marks and include specific headers as required by Microsoft for Windows Autopilot device registration.

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.21.0-alpha | Experimental | Initial release |

## Example Usage

{{ tffile "examples/microsoft365_graph_beta/microsoft365_graph_beta_device_management_windows_autopilot_device_csv_import/resource.tf" }}

{{ .SchemaMarkdown | trimspace }}

### CSV File Format

The CSV file must include the following headers:

```csv
Device Serial Number,Windows Product ID,Hardware Hash,Group Tag,Assigned User
ABC12345,ABCDE-12345-FGHIJ-67890,ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789,IT-Department,user1@contoso.com
DEF67890,FGHIJ-67890-KLMNO-12345,0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ,Finance,user2@contoso.com
```

## Argument Reference

* `file_path` - (Required) Path to the CSV file containing Windows Autopilot device information. The CSV file must be in ANSI format with no quotation marks.

## Attribute Reference

In addition to the arguments listed above, the following attributes are exported:

* `devices` - A list of device entries imported from the CSV file. Each device entry contains:
  * `serial_number` - The device serial number.
  * `windows_product_id` - The Windows product ID.
  * `hardware_hash` - The hardware hash.
  * `group_tag` - The group tag.
  * `assigned_user` - The assigned user.

## CSV File Requirements

The CSV file must meet the following requirements:

1. **File Format**: ANSI encoding (not UTF-8)
2. **No Quotation Marks**: Values should not be enclosed in quotation marks
3. **Required Headers**:
   - `Device Serial Number` (required)
   - `Windows Product ID` (optional for admins, required for partners)
   - `Hardware Hash` (required)
   - `Group Tag` (optional)
   - `Assigned User` (optional)
4. **Case Sensitivity**: Headers must match exactly as shown above
5. **No Extra Spaces**: Headers and values should not have leading or trailing spaces

## Important Notes

1. This is an ephemeral resource, which means:
   - It is not stored in the Terraform state
   - It is executed every time Terraform runs
   - It can only be referenced in specific ephemeral contexts

2. The CSV file is read during the apply phase, not during the plan phase.

3. For large CSV files, consider breaking them into smaller batches to improve performance.

## Permissions

The following Microsoft Graph permissions are required:

- `DeviceManagementServiceConfig.ReadWrite.All`

## Related Resources

- [microsoft365_graph_beta_device_management_windows_autopilot_device_identity](https://registry.terraform.io/providers/deploymenttheory/microsoft365/latest/docs/resources/graph_beta_device_management_windows_autopilot_device_identity)
- [microsoft365_graph_beta_device_management_windows_autopilot_deployment_profile](https://registry.terraform.io/providers/deploymenttheory/microsoft365/latest/docs/resources/graph_beta_device_management_windows_autopilot_deployment_profile) 