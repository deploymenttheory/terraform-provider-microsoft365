---
page_title: "microsoft365_utility_macos_pkg_app_metadata Data Source - terraform-provider-microsoft365"
subcategory: "Utilities"

description: |-
  Extracts metadata from a macOS PKG file specified by file path or URL.
---

# microsoft365_utility_macos_pkg_app_metadata (Data Source)

The `graph_beta_macos_pkg_app_metadata` data source extracts metadata from macOS PKG installer files (.pkg), providing essential information needed for deploying macOS applications in Microsoft Intune. It can extract metadata from either local files or remote URLs.

This data source is particularly useful when creating macOS PKG app resources in Intune, as it automatically extracts critical information such as bundle identifier, version, package IDs, and other metadata required for proper app configuration and management.

## Example Usage

```terraform
# Extract metadata from a local PKG file
data "microsoft365_utility_macos_pkg_app_metadata" "local_example" {
  installer_file_path_source = "/path/to/your/application.pkg"

  timeouts = {
    read = "4m" # Extended timeout for large PKG files
  }
}

# Output all extracted metadata fields
output "pkg_metadata" {
  description = "All metadata extracted from the PKG file"
  value = {
    # Basic app identification
    bundle_id = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.cf_bundle_identifier
    version   = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.cf_bundle_short_version_string
    name      = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.name

    # Installation details
    install_location = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.install_location
    package_ids      = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.package_ids
    app_paths        = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.app_paths
    min_os_version   = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.min_os_version

    # File information
    size_mb         = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.size_mb
    md5_checksum    = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.md5_checksum
    sha256_checksum = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.sha256_checksum

    # Bundles information
    included_bundles = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.included_bundles
  }
}

# Individual outputs for easy reference
output "bundle_id" {
  description = "The bundle identifier of the PKG application"
  value       = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.cf_bundle_identifier
}

output "version" {
  description = "The version of the PKG application"
  value       = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.cf_bundle_short_version_string
}

output "name" {
  description = "The name of the PKG application"
  value       = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.name
}

output "size_mb" {
  description = "The size of the PKG file in megabytes"
  value       = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.size_mb
}

output "sha256_checksum" {
  description = "SHA256 hash of the PKG file content"
  value       = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.sha256_checksum
}

output "md5_checksum" {
  description = "MD5 hash of the PKG file content"
  value       = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.md5_checksum
}

# Example of using the extracted metadata with a macOS PKG app resource
resource "microsoft365_graph_beta_device_and_app_management_macos_pkg_app" "firefox" {
  display_name = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.name
  description  = "Firefox browser deployed via Intune"
  publisher    = "Mozilla"

  # Use the extracted metadata directly
  bundle_id = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.cf_bundle_identifier
  version   = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.cf_bundle_short_version_string

  # Use the same file for the actual deployment
  installer_file_path_source = "/Users/dafyddwatkins/Downloads/Firefox 134.0.pkg"

  # Optional: Use other extracted metadata
  minimum_os_version = data.microsoft365_utility_macos_pkg_app_metadata.local_example.metadata.min_os_version
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Optional

- `installer_file_path_source` (String) The path to the PKG file to be uploaded. The file must be a valid `.pkg` file. Value is not returned by API call.
- `installer_url_source` (String) The web location of the PKG file, can be a http(s) URL. The file must be a valid `.pkg` file. Value is not returned by API call.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `metadata` (Attributes) Extracted metadata from the macOS PKG file. (see [below for nested schema](#nestedatt--metadata))

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).


<a id="nestedatt--metadata"></a>
### Nested Schema for `metadata`

Read-Only:

- `app_paths` (List of String) List of application paths found in the PKG file.
- `cf_bundle_identifier` (String) The bundle identifier (CFBundleIdentifier) extracted from the PKG file.
- `cf_bundle_short_version_string` (String) The version (CFBundleShortVersionString) extracted from the PKG file.
- `included_bundles` (Attributes List) List of additional bundles included in the PKG file. (see [below for nested schema](#nestedatt--metadata--included_bundles))
- `install_location` (String) The installation location specified in the PKG file.
- `md5_checksum` (String) MD5 hash of the PKG file content as a hexadecimal string.
- `min_os_version` (String) The minimum OS version required by the PKG app.
- `name` (String) The app name extracted from the PKG file.
- `package_ids` (List of String) The list of package IDs found in the PKG file.
- `sha256_checksum` (String) SHA256 hash of the PKG file content as a hexadecimal string.
- `size_mb` (Number) The size of the PKG file in megabytes (MB).

<a id="nestedatt--metadata--included_bundles"></a>
### Nested Schema for `metadata.included_bundles`

Read-Only:

- `bundle_id` (String) The bundle identifier of the included bundle.
- `cf_bundle_version` (String) The CFBundleVersion of the included bundle (may differ from version string).
- `path` (String) The path of the included bundle within the PKG file.
- `version` (String) The version of the included bundle.