---
page_title: "microsoft365_graph_beta_applications_service_principal Resource - terraform-provider-microsoft365"
subcategory: "Applications"
description: |-
  Manages a Service Principal in Microsoft Entra ID. Service principals are the local representation of an application object in a specific tenant. They define what the app can do in the specific tenant, who can access the app, and what resources the app can access.
  For more information, see the Microsoft Graph API documentation https://learn.microsoft.com/en-us/graph/api/serviceprincipal-post-serviceprincipals?view=graph-rest-beta.
---

# microsoft365_graph_beta_applications_service_principal (Resource)

Manages a Service Principal in Microsoft Entra ID. Service principals are the local representation of an application object in a specific tenant. They define what the app can do in the specific tenant, who can access the app, and what resources the app can access.

For more information, see the [Microsoft Graph API documentation](https://learn.microsoft.com/en-us/graph/api/serviceprincipal-post-serviceprincipals?view=graph-rest-beta).

## Microsoft Documentation

- [servicePrincipal resource type](https://learn.microsoft.com/en-us/graph/api/resources/serviceprincipal?view=graph-rest-beta)
- [Create servicePrincipal](https://learn.microsoft.com/en-us/graph/api/serviceprincipal-post-serviceprincipals?view=graph-rest-beta&tabs=http)
- [Get servicePrincipal](https://learn.microsoft.com/en-us/graph/api/serviceprincipal-get?view=graph-rest-beta&tabs=http)
- [Update servicePrincipal](https://learn.microsoft.com/en-us/graph/api/serviceprincipal-update?view=graph-rest-beta&tabs=http)
- [Delete servicePrincipal](https://learn.microsoft.com/en-us/graph/api/serviceprincipal-delete?view=graph-rest-beta&tabs=http)

## Microsoft Graph API Permissions

The following client `application` permissions are needed in order to use this resource:

**Required:**
- `Application.Read.All`
- `Directory.Read.All`
- `Application.ReadWrite.All`
- `Directory.ReadWrite.All`

**Optional:**
- `Application.ReadWrite.OwnedBy` (if managing only applications owned by the service principal)

Find out more about the permissions required for managing service principals at Microsoft Learn [here](https://learn.microsoft.com/en-us/graph/api/resources/serviceprincipal?view=graph-rest-beta).

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.43.0 | Experimental | Initial release |

## Important Notes

- **Enterprise Applications**: Service principals are the tenant-specific representation of applications (also called Enterprise Applications in the portal)
- **App ID Required**: You must provide the `app_id` (client ID) of an existing application registration
- **Single Sign-On**: Configure `preferred_single_sign_on_mode` for SSO (options: `saml`, `password`, `notSupported`)
- **App Role Assignment**: Set `app_role_assignment_required = true` to require users/groups be assigned before accessing the application
- **Tags**: Special tags control visibility and behavior:
  - `HideApp`: Hides the application from My Apps portal
  - `WindowsAzureActiveDirectoryIntegratedApp`: Marks as integrated app

## Example Usage

### Minimal Service Principal

```terraform
resource "microsoft365_graph_beta_applications_application" "example" {
  display_name = "my-application"
  description  = "Application for service principal"
}

# Create service principal for the application
resource "microsoft365_graph_beta_applications_service_principal" "example" {
  app_id = microsoft365_graph_beta_applications_application.example.app_id
}
```

### Service Principal with Full Configuration

```terraform
resource "microsoft365_graph_beta_applications_application" "example" {
  display_name = "my-saml-application"
  description  = "SAML-based enterprise application"
}

# Create service principal with full configuration
resource "microsoft365_graph_beta_applications_service_principal" "example" {
  app_id                        = microsoft365_graph_beta_applications_application.example.app_id
  account_enabled               = true
  app_role_assignment_required  = true
  description                   = "Enterprise application for SSO access"
  login_url                     = "https://login.mycompany.com"
  notes                         = "Managed by Terraform - Production environment"
  notification_email_addresses  = ["admin@mycompany.com", "security@mycompany.com"]
  preferred_single_sign_on_mode = "saml"

  tags = [
    "HideApp",
    "WindowsAzureActiveDirectoryIntegratedApp"
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_id` (String) The application (client) ID of the application for which to create the service principal. Required.

### Optional

- `account_enabled` (Boolean) True if the service principal account is enabled; otherwise, false. If set to false, then no users are able to sign in to this app, even if they're assigned to it. Supports `$filter` (`eq`, `ne`, `not`, `in`).
- `app_role_assignment_required` (Boolean) Specifies whether users or other service principals need to be granted an app role assignment for this service principal before users can sign in or apps can get tokens. The default value is false. Not nullable. Supports `$filter` (`eq`, `ne`, `NOT`).
- `description` (String) Free text field to provide an internal end-user facing description of the service principal. End-user portals such MyApps displays the application description in this field. The maximum allowed size is 1,024 characters. Supports `$filter` (`eq`, `ne`, `not`, `ge`, `le`, `startsWith`) and `$search`.
- `hard_delete` (Boolean) When `true`, the service principal will be permanently deleted (hard delete) during destroy. When `false` (default), the service principal will only be soft deleted and moved to the deleted items container where it can be restored within 30 days. Note: This field defaults to `false` on import since the API does not return this value.
- `login_url` (String) Specifies the URL where the service provider redirects the user to Microsoft Entra ID to authenticate. Microsoft Entra ID uses the URL to launch the application from Microsoft 365 or the Microsoft Entra My Apps. When blank, Microsoft Entra ID performs IdP-initiated sign-on for applications configured with SAML-based single sign-on.
- `notes` (String) Free text field to capture information about the service principal, typically used for operational purposes. Maximum allowed size is 1,024 characters.
- `notification_email_addresses` (Set of String) Specifies the list of email addresses where Microsoft Entra ID sends a notification when the active certificate is near the expiration date. This is only for the certificates used to sign the SAML token issued for Microsoft Entra Gallery applications.
- `preferred_single_sign_on_mode` (String) Specifies the single sign-on mode configured for this application. Microsoft Entra ID uses the preferred single sign-on mode to launch the application from Microsoft 365 or the Microsoft Entra My Apps. The supported values are `password`, `saml`, `notSupported`, and `oidc`.
- `tags` (Set of String) Custom strings that can be used to categorize and identify the service principal. Not nullable.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `display_name` (String) The display name for the service principal. Read-only, inherited from the application.
- `homepage` (String) Home page or landing page of the application. Read-only, inherited from the application.
- `id` (String) The unique identifier (object ID) for the service principal. Read-only.
- `logout_url` (String) Specifies the URL that the Microsoft's authorization service uses to sign out a user using OpenId Connect front-channel, back-channel, or SAML sign out protocols. Read-only, inherited from the application.
- `service_principal_names` (Set of String) Contains the list of identifiersUris, copied over from the associated application. Additional values can be added to hybrid applications. These values can be used to identify the permissions exposed by this app within Microsoft Entra ID. Read-only.
- `service_principal_type` (String) Identifies if the service principal represents an application or a managed identity. Read-only.
- `sign_in_audience` (String) Specifies what Microsoft accounts are supported for the application. Read-only.

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

```shell
# Simple import - defaults to hard_delete=false (soft delete with 30-day recovery)
terraform import microsoft365_graph_beta_applications_service_principal.example "00000000-0000-0000-0000-000000000000"

# Extended import - with hard_delete enabled for permanent deletion
terraform import microsoft365_graph_beta_applications_service_principal.example "00000000-0000-0000-0000-000000000000:hard_delete=true"
```
