---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "microsoft365_graph_beta_agents_agent_identity_blueprint_rotate_certificate_credential Resource - Microsoft 365"
subcategory: ""
description: |-
  Manages a key credential for an Agent Identity Blueprint in Microsoft Entra ID using the /applications endpoint. This resource adds a key credential to an agentIdentityBlueprint using the addKey https://learn.microsoft.com/en-us/graph/api/agentidentityblueprint-addkey?view=graph-rest-beta API. This method, along with removeKey, can be used to automate rolling its expiring keys.
  Important: You should only provide the public key value when adding a certificate credential. Adding a private key certificate risks compromising the application.
  As part of the request validation for this method, a proof of possession of an existing key is verified before the action can be performed.
  Note: Agent identity blueprints that don't have any existing valid certificates (no certificates have been added yet, or all certificates have expired), won't be able to use this service action. Use the Update agent identity blueprint operation instead.
  Note: This resource does not support import because the key value cannot be retrieved from the API after creation.
---

# microsoft365_graph_beta_agents_agent_identity_blueprint_rotate_certificate_credential (Resource)

Manages a key credential for an Agent Identity Blueprint in Microsoft Entra ID using the `/applications` endpoint. This resource adds a key credential to an agentIdentityBlueprint using the [addKey](https://learn.microsoft.com/en-us/graph/api/agentidentityblueprint-addkey?view=graph-rest-beta) API. This method, along with removeKey, can be used to automate rolling its expiring keys.

**Important:** You should only provide the public key value when adding a certificate credential. Adding a private key certificate risks compromising the application.

As part of the request validation for this method, a proof of possession of an existing key is verified before the action can be performed.

**Note:** Agent identity blueprints that don't have any existing valid certificates (no certificates have been added yet, or all certificates have expired), won't be able to use this service action. Use the Update agent identity blueprint operation instead.

**Note:** This resource does not support import because the key value cannot be retrieved from the API after creation.



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `blueprint_id` (String) The unique identifier (Object ID) of the agent identity blueprint to add the key credential to.
- `key` (String, Sensitive) The certificate's raw data in byte array converted to Base64 string. From a .cer certificate, you can read the key using the Convert.ToBase64String() method. For more information, see [Get the certificate key](https://learn.microsoft.com/en-us/graph/applications-how-to-add-certificate#get-the-certificate-key). **Important:** Only provide the public key value. Adding a private key risks compromising the application.
- `proof` (String, Sensitive) A self-signed JWT token used as a proof of possession of the existing keys. This JWT token must be signed using the private key of one of the application's existing valid certificates. The token should contain the following claims:
- **aud**: Audience needs to be `00000002-0000-0000-c000-000000000000`.
- **iss**: Issuer needs to be the ID of the application that initiates the request.
- **nbf**: Not before time.
- **exp**: Expiration time should be the value of `nbf` + 10 minutes.

For steps to generate this proof of possession token, see [Generating proof of possession tokens for rolling keys](https://learn.microsoft.com/en-us/graph/application-rollkey-prooftoken).
- `type` (String) The type of key credential. Supported key types are: `AsymmetricX509Cert` (the usage must be `Verify`), `X509CertAndPassword` (the usage must be `Sign`).
- `usage` (String) A string that describes the purpose for which the key can be used. Possible values are: `None`, `Verify`, `PairwiseIdentifier`, `Delegation`, `Decrypt`, `Encrypt`, `HashedIdentifier`, `SelfSignedTls`, or `Sign`. If usage is `Sign`, the type should be `X509CertAndPassword`, and the `password_secret_text` for signing should be defined.

### Optional

- `custom_key_identifier` (String) A 40-character binary type that can be used to identify the credential. Optional. When not provided in the payload, defaults to the thumbprint of the certificate.
- `display_name` (String) Friendly name for the key. Maximum length is 90 characters.
- `end_date_time` (String) The date and time at which the credential expires. The Timestamp type represents date and time information using ISO 8601 format and is always in UTC time. For example, midnight UTC on Jan 1, 2014 is `2014-01-01T00:00:00Z`.
- `password_secret_text` (String, Sensitive) The password for the key. Required only for keys of type `X509CertAndPassword`. Set it to null otherwise.
- `start_date_time` (String) The date and time at which the credential becomes valid. The Timestamp type represents date and time information using ISO 8601 format and is always in UTC time. For example, midnight UTC on Jan 1, 2014 is `2014-01-01T00:00:00Z`.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `key_id` (String) The unique identifier (GUID) for the key. Read-only.

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
