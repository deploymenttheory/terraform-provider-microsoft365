---
page_title: "microsoft365_graph_beta_device_management_windows_autopilot_deployment_profile Resource - terraform-provider-microsoft365"
subcategory: "Device Management"

description: |-
  Manages Windows Autopilot deployment profiles using the /deviceManagement/windowsAutopilotDeploymentProfiles endpoint. Autopilot deployment profiles define the out-of-box experience (OOBE) settings, device naming templates, and enrollment configurations for automated Windows device provisioning and domain joining.
---

# microsoft365_graph_beta_device_management_windows_autopilot_deployment_profile (Resource)

Manages Windows Autopilot deployment profiles using the `/deviceManagement/windowsAutopilotDeploymentProfiles` endpoint. Autopilot deployment profiles define the out-of-box experience (OOBE) settings, device naming templates, and enrollment configurations for automated Windows device provisioning and domain joining.

## Microsoft Documentation

- [windowsAutopilotDeploymentProfile resource type](https://learn.microsoft.com/en-us/graph/api/resources/intune-enrollment-windowsautopilotdeploymentprofile?view=graph-rest-beta)

## API Permissions

The following API permissions are required in order to use this resource.

### Microsoft Graph

- **Application**: `DeviceManagementServiceConfig.ReadWrite.All`

## Example Usage

```terraform
# Basic Windows Autopilot Deployment Profile
resource "microsoft365_graph_beta_device_management_windows_autopilot_deployment_profile" "entra_joined" {
  display_name = "Corporate Windows Autopilot Profile"
  description  = "Windows Autopilot deployment profile for corporate devices with OOBE customization"

  # Device join configuration
  device_join_type = "microsoft_entra_joined"

  # Device configuration
  device_type                      = "windowsPc"
  device_name_template             = "CORP-%SERIAL%"
  locale                           = "en-GB"
  preprovisioning_allowed          = true
  hardware_hash_extraction_enabled = true

  # Role scope tags
  role_scope_tag_ids = ["0", "9", "8"]

  # Azure AD configuration
  hybrid_azure_ad_join_skip_connectivity_check = false

  out_of_box_experience_setting = {
    privacy_settings_hidden         = false
    eula_hidden                     = false
    user_type                       = "administrator"
    device_usage_type               = "singleUser"
    keyboard_selection_page_skipped = true
    escape_link_hidden              = true
  }

  timeouts = {
    create = "3m"
    read   = "3m"
    update = "3m"
    delete = "3m"
  }
}

# Hybrid Domain Join Windows Autopilot Deployment Profile
resource "microsoft365_graph_beta_device_management_windows_autopilot_deployment_profile" "hybrid_domain_join" {
  display_name = "hybrid domain join"
  description  = "test"

  # Device join configuration
  device_join_type = "microsoft_entra_hybrid_joined"

  # Device configuration
  device_type                      = "windowsPc"
  device_name_template             = ""
  locale                           = "os-default"
  preprovisioning_allowed          = true
  hardware_hash_extraction_enabled = true

  # Role scope tags
  role_scope_tag_ids = ["0"]

  # Azure AD configuration
  hybrid_azure_ad_join_skip_connectivity_check = true

  out_of_box_experience_setting = {
    privacy_settings_hidden         = false
    eula_hidden                     = false
    user_type                       = "administrator"
    device_usage_type               = "singleUser"
    keyboard_selection_page_skipped = true
    escape_link_hidden              = true
  }

  timeouts = {
    create = "3m"
    read   = "3m"
    update = "3m"
    delete = "3m"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `device_join_type` (String) The type of device join to configure. Determines which Windows Autopilot deployment profile type to use. Possible values are: `microsoft_entra_joined`, `microsoft_entra_hybrid_joined`.
- `display_name` (String) The display name of the deployment profile. Max allowed length is 200 chars.

### Optional

- `description` (String) A description of the windows autopilotdeployment profile. Max allowed length is 1500 chars.
- `device_name_template` (String) The template used to name the Autopilot device. This can be a custom text and can also contain either the serial number of the device, or a randomly generated number. The total length of the text generated by the template can be no more than 15 characters.
- `device_type` (String) The Windows device type that this profile is applicable to. Possible values include `windowsPc`, `holoLens`, `surfaceHub2`, `surfaceHub2S`, `virtualMachine`, `unknownFutureValue`. The default is `windowsPc`.
- `enrollment_status_screen_settings` (Attributes) The Windows Enrollment Status Screen settings for the deployment profile. (see [below for nested schema](#nestedatt--enrollment_status_screen_settings))
- `hardware_hash_extraction_enabled` (Boolean) Indicates whether the profile supports the extraction of hardware hash values and registration of the device into Windows Autopilot. When TRUE, indicates if hardware extraction and Windows Autopilot registration will happen on the next successful check-in. When FALSE, hardware hash extraction and Windows Autopilot registration will not happen. Default value is FALSE.
- `hybrid_azure_ad_join_skip_connectivity_check` (Boolean) The Autopilot Hybrid Azure AD join flow will continue even if it does not establish domain controller connectivity during OOBE. This is only applicable for `microsoft_entra_hybrid_joined` device join type.
- `locale` (String) The locale (language) to be used when configuring the device. E.g. en-US. The default value is os-default.
- `management_service_app_id` (String) The Entra management service App ID which gets used during client device-based enrollment discovery.
- `out_of_box_experience_setting` (Attributes) The Windows Autopilot Deployment Profile settings used by the device for the out-of-box experience. (see [below for nested schema](#nestedatt--out_of_box_experience_setting))
- `preprovisioning_allowed` (Boolean) Indicates whether the user is allowed to use Windows Autopilot for pre-provisioned deployment mode during Out of Box experience (OOBE). When TRUE, indicates that Windows Autopilot for pre-provisioned deployment mode for OOBE is allowed to be used. When false, Windows Autopilot for pre-provisioned deployment mode for OOBE is not allowed. The default is FALSE.
- `role_scope_tag_ids` (Set of String) List of role scope tags for the deployment profile.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `created_date_time` (String) The date and time of when the deployment profile was created. Read-Only.
- `id` (String) The profile key.
- `language` (String) The language code to be used when configuring the device. E.g. en-US. The default value is os-default. Read-Only. Starting from May 2024 this property will no longer be supported and will be marked as deprecated. Use locale instead.
- `last_modified_date_time` (String) The date and time of when the deployment profile was last modified. Read-Only.

<a id="nestedatt--enrollment_status_screen_settings"></a>
### Nested Schema for `enrollment_status_screen_settings`

Optional:

- `allow_device_use_before_profile_and_app_install_complete` (Boolean) Allow or block user to use device before profile and app installation complete.
- `allow_device_use_on_install_failure` (Boolean) Allow the user to continue using the device on installation failure.
- `allow_log_collection_on_install_failure` (Boolean) Allow or block log collection on installation failure.
- `block_device_setup_retry_by_user` (Boolean) Allow the user to retry the setup on installation failure.
- `custom_error_message` (String) Set custom error message to show upon installation failure.
- `hide_installation_progress` (Boolean) Show or hide installation progress to user.
- `install_progress_timeout_in_minutes` (Number) Set installation progress timeout in minutes.


<a id="nestedatt--out_of_box_experience_setting"></a>
### Nested Schema for `out_of_box_experience_setting`

Optional:

- `device_usage_type` (String) The Entra join authentication type. Possible values are singleUser and shared. The default is singleUser. Possible values are: `singleUser`, `shared`, `unknownFutureValue`.
- `escape_link_hidden` (Boolean) When TRUE, the link that allows user to start over with a different account on company sign-in is hidden. When false, the link that allows user to start over with a different account on company sign-in is available. Default value is FALSE.
- `eula_hidden` (Boolean) When TRUE, EULA is hidden to the end user during OOBE. When FALSE, EULA is shown to the end user during OOBE. Default value is FALSE.
- `keyboard_selection_page_skipped` (Boolean) When TRUE, the keyboard selection page is hidden to the end user during OOBE if Language and Region are set. When FALSE, the keyboard selection page is skipped during OOBE.
- `privacy_settings_hidden` (Boolean) When TRUE, privacy settings is hidden to the end user during OOBE. When FALSE, privacy settings is shown to the end user during OOBE. Default value is FALSE.
- `user_type` (String) The type of user. Possible values are administrator and standard. Default value is administrator. Possible values are: `administrator`, `standard`, `unknownFutureValue`.


<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Important Notes

- **Windows Autopilot**: This resource manages Windows Autopilot deployment profiles that define the out-of-box experience (OOBE) for devices.
- **Device Configuration**: Deployment profiles control how devices are configured during the initial setup process.
- **User Experience**: Profiles can be configured to provide a customized and streamlined setup experience for end users.
- **Assignment Required**: Profiles must be assigned to Windows Autopilot device groups to take effect.
- **Profile Types**: Supports both User-Driven and Self-Deploying deployment scenarios.
- **OOBE Customization**: Configure settings like skip privacy settings, create local admin account, and join domain options.
- **Hybrid Azure AD**: Supports both cloud-only and hybrid Azure AD join scenarios.

## Import

Import is supported using the following syntax:

```shell
# {resource_id}
terraform import microsoft365_graph_beta_device_management_windows_autopilot_deployment_profile.example windows-autopilot-deployment-profile-id
```