---
page_title: "microsoft365_graph_beta_device_management_linux_device_compliance_script Resource - terraform-provider-microsoft365"
subcategory: "Device Management"

description: |-
  Manages Linux device compliance scripts using the /deviceManagement/reusablePolicySettings endpoint. Linux device compliance scripts enable running shell scripts on enrolled Linux devices to validate compliance requirements and provide custom compliance assessments.
---

# microsoft365_graph_beta_device_management_linux_device_compliance_script (Resource)

Manages Linux device compliance scripts using the `/deviceManagement/reusablePolicySettings` endpoint. Linux device compliance scripts enable running shell scripts on enrolled Linux devices to validate compliance requirements and provide custom compliance assessments.


## API Permissions

The following API permissions are required in order to use this resource.

### Microsoft Graph

- **Application**: `DeviceManagementConfiguration.ReadWrite.All` , `DeviceManagementConfiguration.Read.All`

## Example Usage

```terraform
resource "microsoft365_graph_beta_device_management_linux_device_compliance_script" "example" {
  display_name = "Linux Security Compliance Check"
  description  = "Checks for critical security configurations on Linux devices"

  detection_script_content = <<-EOT
    #!/bin/bash
    # Detection script for Linux security compliance
    
    # Check if firewall is active
    if ! systemctl is-active --quiet ufw && ! systemctl is-active --quiet firewalld; then
      echo "No firewall service is active - Non-compliant"
      exit 1
    fi
    
    # Check for automatic updates
    if command -v unattended-upgrade >/dev/null 2>&1; then
      if [ ! -f /etc/apt/apt.conf.d/20auto-upgrades ]; then
        echo "Automatic updates not configured - Non-compliant"
        exit 1
      fi
    elif command -v dnf >/dev/null 2>&1; then
      if ! systemctl is-enabled --quiet dnf-automatic.timer; then
        echo "Automatic updates not enabled - Non-compliant"
        exit 1
      fi
    fi
    
    # Check SSH configuration
    if [ -f /etc/ssh/sshd_config ]; then
      if grep -q "^PermitRootLogin yes" /etc/ssh/sshd_config; then
        echo "Root SSH login is enabled - Non-compliant"
        exit 1
      fi
    fi
    
    # Check for required security packages
    if command -v apt >/dev/null 2>&1; then
      if ! dpkg -l | grep -q fail2ban; then
        echo "fail2ban not installed - Non-compliant"
        exit 1
      fi
    elif command -v rpm >/dev/null 2>&1; then
      if ! rpm -q fail2ban >/dev/null 2>&1; then
        echo "fail2ban not installed - Non-compliant"
        exit 1
      fi
    fi
    
    echo "All security checks passed - Compliant"
    exit 0
  EOT

  timeouts = {
    create = "30m"
    read   = "5m"
    update = "30m"
    delete = "30m"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `detection_script_content` (String) The entire content of the detection shell script for Linux compliance checking.
- `display_name` (String) Name of the Linux device compliance script.

### Optional

- `description` (String) Description of the Linux device compliance script.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `id` (String) Unique identifier for the Linux device compliance script.
- `last_modified_date_time` (String) The timestamp of when the Linux device compliance script was modified. This property is read-only.
- `setting_definition_id` (String) The setting definition ID for Linux custom compliance discovery script.
- `version` (Number) Version of the Linux device compliance script.

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.23.0-alpha | Experimental | Initial release |

## Import

Import is supported using the following syntax:

```shell
#!/bin/bash

# Import an existing Linux Device Compliance Script
# Replace the GUID with the actual ID of your Linux device compliance script

terraform import microsoft365_graph_beta_device_management_linux_device_compliance_script.example "00000000-0000-0000-0000-000000000000"
```