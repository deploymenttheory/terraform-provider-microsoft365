---
page_title: "microsoft365_graph_beta_agents_agent_collection_assignment Resource - terraform-provider-microsoft365"
subcategory: "Agents"

description: |-
  Manages the assignment of an agent instance to an agent collection in the Microsoft Entra Agent Registry. This resource adds an agent instance as a member of an agent collection.
  Use this resource to control which agent instances belong to which collections for organizational and access control purposes.
---

# microsoft365_graph_beta_agents_agent_collection_assignment (Resource)

Manages the assignment of an agent instance to an agent collection in the Microsoft Entra Agent Registry. This resource adds an agent instance as a member of an agent collection.

Use this resource to control which agent instances belong to which collections for organizational and access control purposes.

## Microsoft Documentation

- [agentCollection resource type](https://learn.microsoft.com/en-us/graph/api/resources/agentcollection?view=graph-rest-beta)
- [Add agentInstance to agentCollection](https://learn.microsoft.com/en-us/graph/api/agentcollection-post-members?view=graph-rest-beta)
- [List agentCollection members](https://learn.microsoft.com/en-us/graph/api/agentcollection-list-members?view=graph-rest-beta)
- [Remove agentInstance from agentCollection](https://learn.microsoft.com/en-us/graph/api/agentcollection-delete-members?view=graph-rest-beta)

## API Permissions

The following API permissions are required in order to use this resource.

### Microsoft Graph

- **Read**: `AgentCollection.Read.All`, `AgentInstance.Read.All`
- **Write**: `AgentCollection.ReadWrite.All` and `AgentInstance.Read.All`, or `AgentCollection.ReadWrite.ManagedBy` and `AgentInstance.Read.All`

Additional lesser-privileged permissions scoped to special collections:
- For the **Global** collection: `AgentCollection.ReadWrite.Global` and `AgentInstance.Read.All`
- For the **Quarantined** collection: `AgentCollection.ReadWrite.Quarantined` and `AgentInstance.Read.All`

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.38.0 | Experimental | Initial release |

## Important Notes

### Role Requirements

When using delegated permissions, the authenticated user must be assigned a supported Microsoft Entra role or a custom role with a supported role permission. **Agent Registry Administrator** is the least privileged role supported for this operation.

### Reserved Collections

Two system-reserved collections are always available per tenant:

| Collection  | ID                                   | Purpose                                          |
|-------------|--------------------------------------|--------------------------------------------------|
| Global      | 00000000-0000-0000-0000-000000000001 | Tenant-wide pool of generally available agents   |
| Quarantined | 00000000-0000-0000-0000-000000000002 | Holding area for blocked/review-pending agents   |

## Example Usage

### Basic Example

```terraform
# Minimal Agent Collection Assignment configuration
# Assigns an agent instance to an agent collection
resource "microsoft365_graph_beta_agents_agent_collection_assignment" "example" {
  agent_instance_id   = "00000000-0000-0000-0000-000000000001"
  agent_collection_id = "00000000-0000-0000-0000-000000000002"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `agent_collection_id` (String) The unique identifier of the agent collection to add the agent instance to.
- `agent_instance_id` (String) The unique identifier of the agent instance to add as a member of the collection.

### Optional

- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `id` (String) The unique identifier for the assignment. Format: {agent_instance_id}/{agent_collection_id}.

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

Import is supported using the following syntax:

```shell
#!/bin/bash

# Import an existing Agent Collection Assignment using the composite ID
# Format: {agent_instance_id}/{agent_collection_id}

# The IDs can be found via the Graph API:
# GET https://graph.microsoft.com/beta/agentRegistry/agentInstances
# GET https://graph.microsoft.com/beta/agentRegistry/agentCollections

terraform import microsoft365_graph_beta_agents_agent_collection_assignment.example 00000000-0000-0000-0000-000000000001/00000000-0000-0000-0000-000000000002
```
