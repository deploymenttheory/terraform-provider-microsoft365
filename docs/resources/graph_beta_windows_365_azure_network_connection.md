---
page_title: "microsoft365_graph_beta_windows_365_azure_network_connection Resource - Microsoft365 Provider"
subcategory: "Windows 365"
description: |-
  Manages a Windows 365 Azure Network Connection (Cloud PC On-Premises Connection) in Microsoft 365 via the Microsoft Graph Beta API.
---

# microsoft365_graph_beta_windows_365_azure_network_connection (Resource)

Manages a Windows 365 Azure Network Connection (Cloud PC On-Premises Connection) in Microsoft 365 via the Microsoft Graph Beta API.

## Microsoft Documentation

- [List onPremisesConnections (beta)](https://learn.microsoft.com/en-us/graph/api/virtualendpoint-list-onpremisesconnections?view=graph-rest-beta)

## API Permissions

The following API permissions are required in order to use this resource.

### Microsoft Graph

- **Application**: `CloudPC.ReadWrite.All`

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.19.0-alpha | Experimental | Initial release |

## Example Usage

```terraform
resource "microsoft365_graph_beta_windows_365_azure_network_connection" "example" {
  display_name        = "example-azure-network-connection"
  connection_type     = "hybridAzureADJoin"              # or "azureADJoin"
  ad_domain_name      = "ad.example.com"                 # (optional)
  ad_domain_username  = "admin@example.com"              # (optional)
  ad_domain_password  = var.ad_domain_password           # (optional, sensitive)
  organizational_unit = "OU=Computers,DC=example,DC=com" # (optional)
  resource_group_id   = "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/example-rg"
  subnet_id           = "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/example-rg/providers/Microsoft.Network/virtualNetworks/example-vnet/subnets/example-subnet"
  subscription_id     = "00000000-0000-0000-0000-000000000000"
  virtual_network_id  = "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/example-rg/providers/Microsoft.Network/virtualNetworks/example-vnet"

  # Optionally, you can set timeouts
  # timeouts {
  #   create = "30m"
  #   update = "30m"
  #   delete = "30m"
  #   read   = "5m"
  # }
}

variable "ad_domain_password" {
  description = "The password for the AD domain join account."
  type        = string
  sensitive   = true
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `connection_type` (String) Specifies the method by which a provisioned Cloud PC is joined to Microsoft Entra. The azureADJoin option indicates the absence of an on-premises Active Directory (AD) in the current tenant that results in the Cloud PC device only joining to Microsoft Entra. The hybridAzureADJoin option indicates the presence of an on-premises AD in the current tenant and that the Cloud PC joins both the on-premises AD and Microsoft Entra. The selected option also determines the types of users who can be assigned and can sign into a Cloud PC. The azureADJoin option allows both cloud-only and hybrid users to be assigned and sign in, whereas hybridAzureADJoin is restricted to hybrid users only. Default: hybridAzureADJoin. Possible values: hybridAzureADJoin, azureADJoin, unknownFutureValue.
- `display_name` (String) The display name for the Azure network connection.
- `resource_group_id` (String) The ID of the target resource group. Required format: /subscriptions/{subscription-id}/resourceGroups/{resourceGroupName}.
- `subnet_id` (String) The ID of the target subnet. Required format: /subscriptions/{subscription-id}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/virtualNetworks/{virtualNetworkId}/subnets/{subnetName}.
- `subscription_id` (String) The ID of the target Azure subscription associated with your tenant.
- `virtual_network_id` (String) The ID of the target virtual network. Required format: /subscriptions/{subscription-id}/resourceGroups/{resourceGroupName}/providers/Microsoft.Network/virtualNetworks/{virtualNetworkName}.

### Optional

- `ad_domain_name` (String) The fully qualified domain name (FQDN) of the Active Directory domain you want to join. Optional.
- `ad_domain_password` (String, Sensitive) The password associated with adDomainUsername.
- `ad_domain_username` (String) The username of an Active Directory account (user or service account) that has permissions to create computer objects in Active Directory. Required format: admin@contoso.com. Optional.
- `organizational_unit` (String) The organizational unit (OU) in which the computer account is created. If left null, the OU configured as the default (a well-known computer object container) in your Active Directory domain (OU) is used. Optional.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `health_check_status` (String) The status of the most recent health check done on the Azure network connection. For example, if the status is passed, the Azure network connection passed all checks run by the service. Possible values: pending, running, passed, failed, warning, informational, unknownFutureValue. Read-only.
- `id` (String) Unique identifier for the Azure network connection. Read-only.
- `in_use` (Boolean) Indicates whether a Cloud PC is using this on-premises network connection. true if at least one Cloud PC is using it. Otherwise, false. Read-only. Default is false.
- `managed_by` (String) Specifies which services manage the Azure network connection. Possible values: windows365, devBox, unknownFutureValue, rpaBox. Read-only.

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
## Attributes Reference

- `id` - The unique identifier for the Azure network connection.

## Important Notes

- **Azure Resource IDs**: All resource IDs (resource group, virtual network, subnet) must be provided in lowercase and match the Azure resource ID format.
- **Sensitive Fields**: The `ad_domain_password` field is sensitive and will not be returned by the API after creation. It is preserved in state if set in configuration.

## Import

Import is supported using the following syntax:

```shell
#!/bin/bash
# Replace RESOURCE_ID with the actual Azure Network Connection ID (GUID)
terraform import microsoft365_graph_beta_windows_365_azure_network_connection.example RESOURCE_ID
``` 