---
page_title: "microsoft365_graph_beta_device_management_windows_remediation_script Resource - terraform-provider-microsoft365"
subcategory: "Device Management"

description: |-
  Manages Windows remediation scripts using the /deviceManagement/deviceHealthScripts endpoint. Remediation scripts enable proactive detection and automatic remediation of common issues on Windows devices through PowerShell detection scripts paired with remediation scripts that execute when problems are identified.
---

# microsoft365_graph_beta_device_management_windows_remediation_script (Resource)

Manages Windows remediation scripts using the `/deviceManagement/deviceHealthScripts` endpoint. Remediation scripts enable proactive detection and automatic remediation of common issues on Windows devices through PowerShell detection scripts paired with remediation scripts that execute when problems are identified.

## Microsoft Documentation

- [deviceHealthScript resource type](https://learn.microsoft.com/en-us/graph/api/resources/intune-devices-devicehealthscript?view=graph-rest-beta)
- [Create deviceHealthScript](https://learn.microsoft.com/en-us/graph/api/intune-devices-devicehealthscript-create?view=graph-rest-beta)

## API Permissions

The following API permissions are required in order to use this resource.

### Microsoft Graph

- **Application**: `DeviceManagementConfiguration.ReadWrite.All`

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.14.1-alpha | Experimental | Initial release |

## Example Usage

```terraform
resource "microsoft365_graph_beta_device_management_windows_remediation_script" "example" {
  display_name            = "Windows Security Remediation Script"
  description             = "Detects and remediates common security issues"
  publisher               = "IT Security Team"
  run_as_32_bit           = false
  enforce_signature_check = true
  role_scope_tag_ids      = ["0"]
  run_as_account          = "system" // Optional values:"system", "user"

  detection_script_content = <<-EOT
    # Detection script logic
    if (Test-Path "C:\Temp\issues.txt") {
      Write-Host "Issue detected"
      Exit 1
    } else {
      Write-Host "No issues found"
      Exit 0
    }
  EOT

  remediation_script_content = <<-EOT
    # Remediation script logic
    Remove-Item "C:\Temp\issues.txt" -Force
    Write-Host "Issue remediated"
    Exit 0
  EOT


  # Assignments are defined as a set
  assignments = [
    # Optional: Assignment targeting all devices with a daily schedule
    {
      type        = "allDevicesAssignmentTarget"
      filter_id   = "00000000-0000-0000-0000-000000000000"
      filter_type = "include"

      daily_schedule = {
        interval = 1
        time     = "23:59:59"
        use_utc  = true
      }
    },
    # Optional: Assignment targeting all licensed users with an hourly schedule
    {
      type        = "allLicensedUsersAssignmentTarget"
      filter_id   = "00000000-0000-0000-0000-000000000000"
      filter_type = "exclude"

      hourly_schedule = {
        interval = 2
      }
    },
    # Optional: Assignment targeting a specific group with a run-once schedule
    {
      type        = "groupAssignmentTarget"
      group_id    = "00000000-0000-0000-0000-000000000000"
      filter_id   = "00000000-0000-0000-0000-000000000000"
      filter_type = "include"

      run_once_schedule = {
        date    = "2023-12-31"
        time    = "23:59:59"
        use_utc = true
      }
    },
    # Optional: Assignment targeting a specific group with a daily schedule
    {
      type        = "groupAssignmentTarget"
      group_id    = "00000000-0000-0000-0000-000000000000"
      filter_id   = "00000000-0000-0000-0000-000000000000"
      filter_type = "exclude"

      daily_schedule = {
        interval = 1
        time     = "23:59:59"
        use_utc  = true
      }
    },
    # Optional: Assignment targeting a specific group with an hourly schedule
    {
      type        = "groupAssignmentTarget"
      group_id    = "00000000-0000-0000-0000-000000000000"
      filter_id   = "00000000-0000-0000-0000-000000000000"
      filter_type = "exclude"

      hourly_schedule = {
        interval = 1
      }
    },
    # Optional: Exclusion group assignments
    {
      type     = "exclusionGroupAssignmentTarget"
      group_id = "00000000-0000-0000-0000-000000000000"
    },
    {
      type     = "exclusionGroupAssignmentTarget"
      group_id = "00000000-0000-0000-0000-000000000000"
    },

  ]

  timeouts = {
    create = "30m"
    read   = "5m"
    update = "30m"
    delete = "30m"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `detection_script_content` (String) The entire content of the detection PowerShell script.
- `display_name` (String) Name of the device health script.
- `publisher` (String) Name of the device health script publisher.
- `remediation_script_content` (String) The entire content of the remediation PowerShell script.
- `run_as_account` (String) Indicates the type of execution context. Possible values are: system, user.

### Optional

- `assignments` (Attributes Set) Assignments for the Windows remediation script. Each assignment specifies the target group and schedule for script execution. (see [below for nested schema](#nestedatt--assignments))
- `description` (String) Description of the device health script.
- `detection_script_parameters` (Attributes List) List of ComplexType DetectionScriptParameters objects. (see [below for nested schema](#nestedatt--detection_script_parameters))
- `enforce_signature_check` (Boolean) Indicate whether the script signature needs be checked. Default is false, which does not check the script signature.
- `role_scope_tag_ids` (Set of String) Set of scope tag IDs for this Settings Catalog template profile.
- `run_as_32_bit` (Boolean) Indicate whether PowerShell script(s) should run as 32-bit. Default is false, which runs script in 64-bit PowerShell.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `created_date_time` (String) The timestamp of when the device health script was created. This property is read-only.
- `device_health_script_type` (String) DeviceHealthScriptType for the script policy. Possible values are: deviceHealthScript, managedInstallerScript.
- `highest_available_version` (String) Highest available version for a Microsoft Proprietary script.
- `id` (String) Unique identifier for the device health script.
- `is_global_script` (Boolean) Determines if this is Microsoft Proprietary Script. Proprietary scripts are read-only.
- `last_modified_date_time` (String) The timestamp of when the device health script was modified. This property is read-only.
- `version` (String) Version of the device health script.

<a id="nestedatt--assignments"></a>
### Nested Schema for `assignments`

Required:

- `type` (String) Type of assignment target. Must be one of: 'allDevicesAssignmentTarget', 'allLicensedUsersAssignmentTarget', 'groupAssignmentTarget', 'exclusionGroupAssignmentTarget'.

Optional:

- `daily_schedule` (Attributes) Configuration for daily schedule execution. Only one schedule type (daily_schedule, hourly_schedule, or run_once_schedule) should be specified per assignment. (see [below for nested schema](#nestedatt--assignments--daily_schedule))
- `filter_id` (String) ID of the filter to apply to the assignment.
- `filter_type` (String) Type of filter to apply. Must be one of: 'include', 'exclude', or 'none'.
- `group_id` (String) The Entra ID group ID to include or exclude in the assignment. Required when type is 'groupAssignmentTarget' or 'exclusionGroupAssignmentTarget'.
- `hourly_schedule` (Attributes) Configuration for hourly schedule execution. Only one schedule type (daily_schedule, hourly_schedule, or run_once_schedule) should be specified per assignment. (see [below for nested schema](#nestedatt--assignments--hourly_schedule))
- `run_once_schedule` (Attributes) Configuration for one-time execution. Only one schedule type (daily_schedule, hourly_schedule, or run_once_schedule) should be specified per assignment. (see [below for nested schema](#nestedatt--assignments--run_once_schedule))

<a id="nestedatt--assignments--daily_schedule"></a>
### Nested Schema for `assignments.daily_schedule`

Required:

- `time` (String) Time of day in format 'HH:MM:SS'.

Optional:

- `interval` (Number) Days between runs. Default is 1.
- `use_utc` (Boolean) Whether to use UTC time. Default is false (local time).


<a id="nestedatt--assignments--hourly_schedule"></a>
### Nested Schema for `assignments.hourly_schedule`

Optional:

- `interval` (Number) Hours between runs. Default is 1.


<a id="nestedatt--assignments--run_once_schedule"></a>
### Nested Schema for `assignments.run_once_schedule`

Required:

- `date` (String) Date for the one-time execution in format 'YYYY-MM-DD'.
- `time` (String) Time of day in format 'HH:MM:SS'.

Optional:

- `use_utc` (Boolean) Whether to use UTC time. Default is false (local time).



<a id="nestedatt--detection_script_parameters"></a>
### Nested Schema for `detection_script_parameters`

Required:

- `name` (String) The name of the param

Optional:

- `apply_default_value_when_not_assigned` (Boolean) Whether Apply DefaultValue When Not Assigned
- `description` (String) The description of the param
- `is_required` (Boolean) Whether the param is required


<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

Import is supported using the following syntax:

```shell
# {resource_id}
terraform import microsoft365_graph_beta_device_and_app_management_windows_remediation_script.example windows-remediation-script-id
```