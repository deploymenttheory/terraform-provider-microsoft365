---
page_title: "microsoft365_graph_beta_agents_agent_identity_blueprint_service_principal Resource - terraform-provider-microsoft365"
subcategory: "Agents"

description: |-
  Manages a service principal for an Agent Identity Blueprint in Microsoft Entra ID using the /servicePrincipals/{id}/microsoft.graph.agentIdentityBlueprintPrincipal endpoint. This resource creates an agentIdentityBlueprintPrincipal service principal for an existing agent identity blueprint.
---

# microsoft365_graph_beta_agents_agent_identity_blueprint_service_principal (Resource)

Manages a service principal for an Agent Identity Blueprint in Microsoft Entra ID using the `/servicePrincipals/{id}/microsoft.graph.agentIdentityBlueprintPrincipal` endpoint. This resource creates an agentIdentityBlueprintPrincipal service principal for an existing agent identity blueprint.

## Microsoft Documentation

- [agentIdentityBlueprintPrincipal resource type](https://learn.microsoft.com/en-us/graph/api/resources/agentidentityblueprintprincipal?view=graph-rest-beta)
- [Create service principal for blueprint](https://learn.microsoft.com/en-us/entra/agent-id/identity-platform/create-blueprint?tabs=microsoft-graph-api#create-a-service-principal-for-the-blueprint)
- [Delete service principal](https://learn.microsoft.com/en-us/graph/api/serviceprincipal-delete?view=graph-rest-beta&tabs=http)

## API Permissions

The following API permissions are required in order to use this resource.

### Microsoft Graph

- **Read Permissions**: `AgentIdentityBlueprintPrincipal.Read.All`
- **Write Permissions**: `AgentIdentityBlueprintPrincipal.ReadWrite.All`, `Directory.ReadWrite.All`

Find out more about the permissions required for managing agent identities at microsoft learn [here](https://learn.microsoft.com/en-us/graph/api/resources/agentid-platform-overview?view=graph-rest-beta#permissions-for-managing-agent-identities).

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.38.0 | Experimental | Initial release |

## Important Notes

- This resource creates an `agentIdentityBlueprintPrincipal` service principal for an existing agent identity blueprint
- The service principal is created using the blueprint's `app_id`
- Updates are not supported - the service principal must be deleted and recreated if changes are needed
- The `app_id` attribute requires the application (client) ID of the agent identity blueprint, not the object ID

## Example Usage

### Basic Example

```terraform
# Example: Create a service principal for an agent identity blueprint

# First, create or reference an existing agent identity blueprint
resource "microsoft365_graph_beta_agents_agent_identity_blueprint" "example" {
  display_name     = "example-agent-identity-blueprint"
  sponsor_user_ids = ["00000000-0000-0000-0000-000000000000"]
  owner_user_ids   = ["00000000-0000-0000-0000-000000000000"]
  description      = "Example agent identity blueprint for service principal creation"
  hard_delete      = true
}

# Create a service principal for the blueprint
resource "microsoft365_graph_beta_agents_agent_identity_blueprint_service_principal" "example" {
  app_id      = microsoft365_graph_beta_agents_agent_identity_blueprint.example.app_id
  hard_delete = true
}

# Output the service principal ID
output "service_principal_id" {
  value       = microsoft365_graph_beta_agents_agent_identity_blueprint_service_principal.example.id
  description = "The Object ID of the created service principal"
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `app_id` (String) The application (client) ID of the agent identity blueprint for which to create the service principal. Required.

### Optional

- `hard_delete` (Boolean) When set to `true`, the resource will be permanently deleted from the Entra ID (hard delete) rather than being moved to deleted items (soft delete). This prevents the resource from being restored and immediately frees up the resource name for reuse. When `false` (default), the resource is soft deleted and can be restored within 30 days. Note: This field defaults to `false` on import since the API does not return this value.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `id` (String) The unique identifier for the service principal. Read-only.

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).

## Import

Import is supported using the following syntax:

```shell
# Import an existing agent identity blueprint service principal
# The import ID format is: {service_principal_id}[:hard_delete=true|false]
#
# Where:
# - {service_principal_id} is the service principal's object ID
# - hard_delete is optional (defaults to false for soft delete only)

# Basic import (hard_delete defaults to false - soft delete only)
terraform import microsoft365_graph_beta_agents_agent_identity_blueprint_service_principal.example "00000000-0000-0000-0000-000000000000"

# Import with hard_delete enabled (permanently deletes on terraform destroy)
terraform import microsoft365_graph_beta_agents_agent_identity_blueprint_service_principal.example "00000000-0000-0000-0000-000000000000:hard_delete=true"
```