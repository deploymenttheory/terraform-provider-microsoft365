---
page_title: "microsoft365_graph_beta_users_user_license_assignment Resource - terraform-provider-microsoft365"
subcategory: "Users"
description: |-
  Manages Microsoft 365 license assignments for individual users using the /users/{userId}/assignLicense endpoint. This resource enables direct license assignment to users, allowing administrators to grant or revoke access to Microsoft cloud services like Office 365, Enterprise Mobility + Security, and Windows licenses.
---

# microsoft365_graph_beta_users_user_license_assignment (Resource)

Manages Microsoft 365 license assignments for individual users using the `/users/{userId}/assignLicense` endpoint. This resource enables direct license assignment to users, allowing administrators to grant or revoke access to Microsoft cloud services like Office 365, Enterprise Mobility + Security, and Windows licenses.

## Microsoft Documentation

- [user: assignLicense](https://learn.microsoft.com/en-us/graph/api/user-assignlicense?view=graph-rest-beta)
- [user resource type](https://learn.microsoft.com/en-us/graph/api/resources/user?view=graph-rest-beta)
- [subscribedSku resource type](https://learn.microsoft.com/en-us/graph/api/resources/subscribedsku?view=graph-rest-beta)

## API Permissions

The following API permissions are required in order to use this resource.

### Microsoft Graph

- **Application**: `User.ReadWrite.All`, `Directory.ReadWrite.All`

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.15.0-alpha | Experimental | Initial release |

## Example Usage

```terraform
# Example 1: Assign Office 365 E3 license to a user
resource "microsoft365_graph_beta_users_user_license_assignment" "user_e3_license" {
  user_id = "john.doe@example.com" # Can be user ID or UPN

  add_licenses = [
    {
      sku_id = "6fd2c87f-b296-42f0-b197-1e91e994b900" # Office 365 E3
      disabled_plans = [
        "efb87545-963c-4e0d-99df-69c6916d9eb0" # Disable specific service plan
      ]
    }
  ]

  remove_licenses = []

  timeouts = {
    create = "30s"
    read   = "30s"
    update = "30s"
    delete = "30s"
  }
}

# Example 2: Assign multiple licenses to a user
resource "microsoft365_graph_beta_users_user_license_assignment" "user_multiple_licenses" {
  user_id = "jane.smith@example.com"

  add_licenses = [
    {
      sku_id         = "6fd2c87f-b296-42f0-b197-1e91e994b900" # Office 365 E3
      disabled_plans = []
    },
    {
      sku_id = "b05e124f-c7cc-45a0-a6aa-8cf78c946968" # Enterprise Mobility + Security E5
      disabled_plans = [
        "8a256a2b-b617-496d-b51b-e76466e88db0" # Disable Microsoft Defender for Cloud Apps
      ]
    }
  ]

  remove_licenses = []

  timeouts = {
    create = "30s"
    read   = "30s"
    update = "30s"
    delete = "30s"
  }
}

# Example 3: Remove specific licenses from a user
resource "microsoft365_graph_beta_users_user_license_assignment" "user_license_removal" {
  user_id = "bob.johnson@example.com"

  add_licenses = []

  remove_licenses = [
    "6fd2c87f-b296-42f0-b197-1e91e994b900", # Remove Office 365 E3
    "b05e124f-c7cc-45a0-a6aa-8cf78c946968"  # Remove Enterprise Mobility + Security E5
  ]

  timeouts = {
    create = "30s"
    read   = "30s"
    update = "30s"
    delete = "30s"
  }
}

# Example 4: Replace existing licenses (remove old, add new)
resource "microsoft365_graph_beta_users_user_license_assignment" "user_license_replacement" {
  user_id = "alice.wilson@example.com"

  add_licenses = [
    {
      sku_id         = "c7df2760-2c81-4ef7-b578-5b5392b571df" # Office 365 E5
      disabled_plans = []
    }
  ]

  remove_licenses = [
    "6fd2c87f-b296-42f0-b197-1e91e994b900" # Remove Office 365 E3
  ]

  timeouts = {
    create = "30s"
    read   = "30s"
    update = "30s"
    delete = "30s"
  }
}

# Example 5: Using a data source to get user ID dynamically
data "microsoft365_graph_beta_users_user" "target_user" {
  user_principal_name = "dynamic.user@example.com"
}

resource "microsoft365_graph_beta_users_user_license_assignment" "dynamic_user_license" {
  user_id = data.microsoft365_graph_beta_users_user.target_user.id

  add_licenses = [
    {
      sku_id         = "6fd2c87f-b296-42f0-b197-1e91e994b900" # Office 365 E3
      disabled_plans = []
    }
  ]

  remove_licenses = []

  timeouts = {
    create = "30s"
    read   = "30s"
    update = "30s"
    delete = "30s"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `user_id` (String) The unique identifier for the user. Can be either the object ID (UUID) or user principal name (UPN).

### Optional

- `add_licenses` (Attributes List) A collection of licenses to assign to the user. (see [below for nested schema](#nestedatt--add_licenses))
- `remove_licenses` (Set of String) A collection of SKU IDs that identify the licenses to remove from the user.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `assigned_licenses` (Attributes List) The current licenses assigned to the user. This is read-only. (see [below for nested schema](#nestedatt--assigned_licenses))
- `id` (String) The unique identifier for this license assignment resource. This is the same as the user_id.
- `user_principal_name` (String) The user principal name (UPN) of the user. This is computed and read-only.

<a id="nestedatt--add_licenses"></a>
### Nested Schema for `add_licenses`

Required:

- `sku_id` (String) The unique identifier (GUID) for the license SKU.

Optional:

- `disabled_plans` (Set of String) A collection of the unique identifiers for service plans to disable.


<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).


<a id="nestedatt--assigned_licenses"></a>
### Nested Schema for `assigned_licenses`

Read-Only:

- `service_plans` (Attributes List) The service plans available with this license. (see [below for nested schema](#nestedatt--assigned_licenses--service_plans))
- `sku_id` (String) The unique identifier (GUID) for the license SKU.
- `sku_part_number` (String) The string identifier of the license SKU, for example 'AAD_Premium'.

<a id="nestedatt--assigned_licenses--service_plans"></a>
### Nested Schema for `assigned_licenses.service_plans`

Read-Only:

- `applies_to` (String) The object the service plan can be assigned to.
- `provisioning_status` (String) The provisioning status of the service plan.
- `service_plan_id` (String) The unique identifier of the service plan.
- `service_plan_name` (String) The name of the service plan.

## Important Notes

- **License Management**: This resource manages license assignments for Microsoft 365 users using the [assignLicense](https://learn.microsoft.com/en-us/graph/api/user-assignlicense?view=graph-rest-beta&tabs=http) Microsoft Graph API.
- **SKU IDs**: License SKU IDs are required to assign licenses. You can get available SKUs using the `GET /subscribedSkus` endpoint.
- **Service Plans**: Individual service plans within a license can be disabled using the `disabled_plans` attribute.
- **Atomic Operations**: License assignments are atomic - the API processes all additions and removals in a single operation.
- **Permissions**: Users must have appropriate permissions in Azure AD to assign licenses to other users.

## Common License SKU IDs

Here are some common Microsoft 365 license SKU IDs:

| License | SKU ID |
|---------|--------|
| Office 365 E1 | `18181a46-0d4e-45cd-891e-60aabd171b4e` |
| Office 365 E3 | `6fd2c87f-b296-42f0-b197-1e91e994b900` |
| Office 365 E5 | `c7df2760-2c81-4ef7-b578-5b5392b571df` |
| Microsoft 365 E3 | `05e9a617-0261-4cee-bb44-138d3ef5d965` |
| Microsoft 365 E5 | `06ebc4ee-1bb5-47dd-8120-11324bc54e06` |
| Enterprise Mobility + Security E3 | `efccb6f7-5641-4e0e-bd10-b4976e1bf68e` |
| Enterprise Mobility + Security E5 | `b05e124f-c7cc-45a0-a6aa-8cf78c946968` |

## Import

Import is supported using the following syntax:

```shell
#!/bin/bash
# Import using user object ID
terraform import microsoft365_graph_beta_user_license_assignment.example "12345678-1234-1234-1234-123456789012"

# Import using user principal name (UPN)
terraform import microsoft365_graph_beta_user_license_assignment.example "john.doe@example.com"
``` 