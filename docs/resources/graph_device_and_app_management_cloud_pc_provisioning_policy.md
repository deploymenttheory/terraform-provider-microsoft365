---
page_title: "microsoft365_graph_device_and_app_management_cloud_pc_provisioning_policy Resource - microsoft365"
subcategory: "Intune"
description: |-
  
---

# microsoft365_graph_device_and_app_management_cloud_pc_provisioning_policy (Resource)



## Example Usage

```terraform
resource "microsoft365_graph_device_and_app_management_cloud_pc_provisioning_policy" "example" {
  display_name             = "Example Cloud PC Provisioning Policy"
  description              = "This is an example Cloud PC provisioning policy"
  cloud_pc_naming_template = "CPC-%USERNAME:4%-%RAND:5%"

  image_id   = "Microsoftwindowsdesktop_windows-ent-cpc_21h1-ent-cpc-m365"
  image_type = "gallery"

  provisioning_type = "dedicated"

  enable_single_sign_on = true
  local_admin_enabled   = false

  domain_join_configurations = [
    {
      domain_join_type          = "azureADJoin"
      on_premises_connection_id = "12345678-1234-1234-1234-123456789012"
      region_name               = "eastus"
    }
  ]

  microsoft_managed_desktop = {
    managed_type = "premiumManaged"
    profile      = "Standard"
  }

  windows_setting = {
    locale = "en-US"
  }

  timeouts = {
    create = "30m"
    read   = "10m"
    update = "30m"
    delete = "30m"
  }
}

resource "microsoft365_graph_device_and_app_management_cloud_pc_provisioning_policy" "example" {
  display_name             = "Example Cloud PC Provisioning Policy"
  description              = "This is an example Cloud PC provisioning policy"
  cloud_pc_naming_template = "CPC-%USERNAME:4%-%RAND:5%"

  image_id   = "Microsoftwindowsdesktop_windows-ent-cpc_21h1-ent-cpc-m365"
  image_type = "gallery"

  provisioning_type = "dedicated"

  enable_single_sign_on = true
  local_admin_enabled   = false

  windows_setting = {
    locale = "en-US"
  }

  timeouts = {
    create = "30m"
    read   = "10m"
    update = "30m"
    delete = "30m"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cloud_pc_naming_template` (String) The template used to name Cloud PCs provisioned using this policy. The template can contain custom text and replacement tokens, including %USERNAME:x% and %RAND:x%, which represent the user's name and a randomly generated number, respectively. For example, CPC-%USERNAME:4%-%RAND:5% means that the name of the Cloud PC starts with CPC-, followed by a four-character username, a - character, and then five random characters. The total length of the text generated by the template can't exceed 15 characters. Supports $filter, $select, and $orderby.
- `display_name` (String) The display name for the provisioning policy.
- `image_id` (String) The unique identifier that represents an operating system image used for provisioning new Cloud PCs. The format for a gallery type image is: {publisherName_offerName_skuName}. Supported values: publisher: 'Microsoftwindowsdesktop', offer: 'windows-ent-cpc', sku: '21h1-ent-cpc-m365', '21h1-ent-cpc-os', '20h2-ent-cpc-m365', '20h2-ent-cpc-os', '20h1-ent-cpc-m365', '20h1-ent-cpc-os', '19h2-ent-cpc-m365', '19h2-ent-cpc-os'.
- `image_type` (String) The type of operating system image (custom or gallery) that is used for provisioning on Cloud PCs. Possible values are: gallery, custom. The default value is gallery. Supports $filter, $select, and $orderBy.
- `provisioning_type` (String) Specifies the type of license used when provisioning Cloud PCs using this policy. By default, the license type is dedicated if the provisioningType isn't specified when you create the cloudPcProvisioningPolicy. Possible values are: dedicated, shared, unknownFutureValue. Supports $filter, $select, and $orderBy.

### Optional

- `description` (String) The provisioning policy description. Supports $filter, $select, and $orderBy.
- `domain_join_configurations` (Attributes List) Specifies a list ordered by priority on how Cloud PCs join Microsoft Entra ID (Azure AD). (see [below for nested schema](#nestedatt--domain_join_configurations))
- `enable_single_sign_on` (Boolean) True if the provisioned Cloud PC can be accessed by single sign-on. False indicates that the provisioned Cloud PC doesn't support this feature. The default value is false. Supports $filter, $select, and $orderby.
- `local_admin_enabled` (Boolean) When true, the local admin is enabled for Cloud PCs; false indicates that the local admin isn't enabled for Cloud PCs. The default value is false. Supports $filter, $select, and $orderBy.
- `microsoft_managed_desktop` (Attributes) The specific settings for Microsoft Managed Desktop that enables Microsoft Managed Desktop customers to get device managed experience for Cloud PC. (see [below for nested schema](#nestedatt--microsoft_managed_desktop))
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))
- `windows_setting` (Attributes) Indicates a specific Windows setting to configure during the creation of Cloud PCs for this provisioning policy. (see [below for nested schema](#nestedatt--windows_setting))

### Read-Only

- `alternate_resource_url` (String) The URL of the alternate resource that links to this provisioning policy. Read-only.
- `cloud_pc_group_display_name` (String) The display name of the Cloud PC group that the Cloud PCs reside in. Read-only.
- `grace_period_in_hours` (Number) The number of hours to wait before reprovisioning/deprovisioning happens. Read-only.
- `id` (String) The unique identifier of the provisioning policy.
- `image_display_name` (String) The display name of the operating system image that is used for provisioning. Supports $filter, $select, and $orderBy.

<a id="nestedatt--domain_join_configurations"></a>
### Nested Schema for `domain_join_configurations`

Required:

- `domain_join_type` (String) Specifies the method by which the provisioned Cloud PC joins Microsoft Entra ID.

Optional:

- `on_premises_connection_id` (String) The Azure network connection ID that matches the virtual network IT admins want the provisioning policy to use when they create Cloud PCs.
- `region_name` (String) The supported Azure region where the IT admin wants the provisioning policy to create Cloud PCs.


<a id="nestedatt--microsoft_managed_desktop"></a>
### Nested Schema for `microsoft_managed_desktop`

Optional:

- `managed_type` (String) Indicates the provisioning policy associated with Microsoft Managed Desktop settings.
- `profile` (String) The name of the Microsoft Managed Desktop profile that the Windows 365 Cloud PC is associated with.


<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).


<a id="nestedatt--windows_setting"></a>
### Nested Schema for `windows_setting`

Optional:

- `locale` (String) The Windows language or region tag to use for language pack configuration and localization of the Cloud PC. The default value is en-US, which corresponds to English (United States).

## Import

Import is supported using the following syntax:

```shell
# Using the provider-default project ID, the import ID is:
# {resource_id}
terraform import microsoft365_graph_device_and_app_management_cloud_pc_provisioning_policy.example cloud-pc-provisioning-policy-id
```