---
page_title: "microsoft365_graph_beta_device_management_windows_autopilot_device_identity Resource - terraform-provider-microsoft365"
subcategory: "Device Management"

description: |-
  Manages Windows Autopilot device identities using the /deviceManagement/windowsAutopilotDeviceIdentities endpoint. Windows Autopilot device identities represent devices registered with the Windows Autopilot service for automated device provisioning.
---

# microsoft365_graph_beta_device_management_windows_autopilot_device_identity (Resource)

Manages Windows Autopilot device identities using the `/deviceManagement/windowsAutopilotDeviceIdentities` endpoint. Windows Autopilot device identities represent devices registered with the Windows Autopilot service for automated device provisioning.

## Microsoft Documentation

- [windowsAutopilotDeviceIdentity resource type](https://learn.microsoft.com/en-us/graph/api/resources/intune-enrollment-windowsautopilotdeviceidentity?view=graph-rest-beta)

## API Permissions

The following API permissions are required in order to use this resource.

### Microsoft Graph

- **Application**: `DeviceManagementServiceConfig.ReadWrite.All`

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.21.0-alpha | Experimental | Initial release |


## Example Usage

```terraform
# Example: Windows Autopilot Device Identity with user assignment
# Note: Hardware hash must be collected before using this resource
# See: https://learn.microsoft.com/en-us/autopilot/add-devices for collection methods

resource "microsoft365_graph_beta_device_management_windows_autopilot_device_identity" "example_with_user" {
  # Required field - must be unique per device
  serial_number = "EXAMPLESERIAL123"

  # Optional fields for device identification and organization
  group_tag                 = "Finance-Dept" # Used for targeting specific deployment profiles
  purchase_order_identifier = "PO-12345"     # For tracking procurement information
  product_key               = "XXXXX-XXXXX-XXXXX-XXXXX-XXXXX"
  display_name              = "Finance-Laptop-01"
  manufacturer              = "Example Manufacturer"
  model                     = "Example Model"

  # User assignment configuration - enables personalized setup
  # Warning: Ensure the UPN exists or device may become inaccessible
  user_assignment {
    user_principal_name = "finance-user@example.com"
    # addressable_user_name is computed and returned by the API
  }

  timeouts {
    create = "30m"
    read   = "10m"
    update = "30m"
    delete = "10m"
  }
}

# Example 2: Windows Autopilot Device Identity without user assignment
resource "microsoft365_graph_beta_device_management_windows_autopilot_device_identity" "example_without_user" {
  serial_number             = "EXAMPLESERIAL456"
  group_tag                 = "Example-Group-2"
  purchase_order_identifier = "PO-67890"
  product_key               = "YYYYY-YYYYY-YYYYY-YYYYY-YYYYY"
  display_name              = "Example Device without User"
  manufacturer              = "Example Manufacturer"
  model                     = "Example Model"

  # No user_assignment block means no user will be assigned to this device

  timeouts = {
    create = "30m"
    read   = "10m"
    update = "30m"
    delete = "10m"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `serial_number` (String) Serial number of the Windows autopilot device.

### Optional

- `display_name` (String) Display Name
- `group_tag` (String) Group Tag of the Windows Autopilot device. This tag can be used to add devices to a logical group and can be leveraged by deployment profiles for group-specific configurations.
- `manufacturer` (String) Oem manufacturer of the Windows autopilot device.
- `model` (String) Model name of the Windows autopilot device.
- `product_key` (String) Product Key of the Windows autopilot device.
- `purchase_order_identifier` (String) Purchase Order Identifier of the Windows autopilot device.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))
- `user_assignment` (Attributes) User assignment configuration for the Windows Autopilot device. This block allows you to assign or unassign users to the device. (see [below for nested schema](#nestedatt--user_assignment))
- `user_principal_name` (String) User Principal Name.

### Read-Only

- `addressable_user_name` (String) Addressable user name.
- `azure_active_directory_device_id` (String) AAD Device ID - to be deprecated
- `azure_ad_device_id` (String) AAD Device ID
- `deployment_profile_assigned_date_time` (String) Profile set time of the Windows autopilot device.
- `deployment_profile_assignment_detailed_status` (String) Profile assignment detailed status of the Windows autopilot device. Possible values are: none, hardwareRequirementsNotMet, surfaceHubProfileNotSupported, holoLensProfileNotSupported, windowsPcProfileNotSupported, surfaceHub2SProfileNotSupported, unknownFutureValue.
- `deployment_profile_assignment_status` (String) Profile assignment status of the Windows autopilot device. Possible values are: unknown, assignedInSync, assignedOutOfSync, assignedUnkownSyncState, notAssigned, pending, failed.
- `enrollment_state` (String) Intune enrollment state of the Windows autopilot device. Possible values are: unknown, enrolled, pendingReset, failed, notContacted, blocked.
- `id` (String) The unique identifier for the Windows Autopilot device identity.
- `last_contacted_date_time` (String) Intune Last Contacted Date Time of the Windows autopilot device.
- `managed_device_id` (String) Managed Device ID
- `remediation_state` (String) Device Remediation State. Possible values are: unknown, noRemediationRequired, automaticRemediationRequired, manualRemediationRequired, unknownFutureValue.
- `remediation_state_last_modified_date_time` (String) RemediationState set time of Autopilot device.
- `resource_name` (String) Resource Name.
- `sku_number` (String) SKU Number
- `system_family` (String) System Family
- `userless_enrollment_status` (String) Enrollment status for userless enrollments. Possible values are: unknown, allowed, blocked, unknownFutureValue.

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).


<a id="nestedatt--user_assignment"></a>
### Nested Schema for `user_assignment`

Required:

- `user_principal_name` (String) User Principal Name (UPN) of the user to be assigned to the device.

Read-Only:

- `addressable_user_name` (String) Addressable user name that gets set on the device.

## Important Notes

- The resource leverages the `assignUserToDevice` endpoint to assign a user to a Windows Autopilot device.

## Import

Import is supported using the following syntax:

```shell
#!/bin/bash

# {resource_id}
terraform import microsoft365_graph_beta_device_management_windows_autopilot_device_identity.example 00000000-0000-0000-0000-000000000000
```
