---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "microsoft365_graph_beta_identity_and_access_conditional_access_policy Resource - microsoft365"
subcategory: ""
description: |-
  
---

# microsoft365_graph_beta_identity_and_access_conditional_access_policy (Resource)





<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `conditions` (Attributes) Specifies the rules that must be met for the policy to apply. Required. (see [below for nested schema](#nestedatt--conditions))
- `display_name` (String) Specifies a display name for the conditionalAccessPolicy object.
- `grant_controls` (Attributes) Specifies the grant controls that must be fulfilled to pass the policy. (see [below for nested schema](#nestedatt--grant_controls))
- `state` (String) Specifies the state of the conditionalAccessPolicy object. Possible values are: `enabled`, `disabled`, `enabledForReportingButNotEnforced`. Required.

### Optional

- `description` (String) Not used.
- `session_controls` (Attributes) Specifies the session controls that are enforced after sign-in. (see [below for nested schema](#nestedatt--session_controls))
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `created_date_time` (String) The Timestamp type represents date and time information using ISO 8601 format and is always in UTC time. For example, midnight UTC on Jan 1, 2014 is `2014-01-01T00:00:00Z`. Readonly.
- `id` (String) Specifies the identifier of a conditionalAccessPolicy object. Read-only.
- `modified_date_time` (String) The Timestamp type represents date and time information using ISO 8601 format and is always in UTC time. For example, midnight UTC on Jan 1, 2014 is `2014-01-01T00:00:00Z`. Readonly.

<a id="nestedatt--conditions"></a>
### Nested Schema for `conditions`

Required:

- `applications` (Attributes) Applications and user actions included in and excluded from the policy. Required. (see [below for nested schema](#nestedatt--conditions--applications))
- `client_app_types` (List of String) Client application types included in the policy. Possible values are: all, browser, mobileAppsAndDesktopClients, exchangeActiveSync, easSupported, other. Required. The easUnsupported enumeration member is deprecated in favor of exchangeActiveSync, which includes EAS supported and unsupported platforms.
- `sign_in_risk_levels` (List of String) Sign-in risk levels included in the policy. Possible values are: low, medium, high, hidden, none, unknownFutureValue. Required.
- `user_risk_levels` (List of String) User risk levels included in the policy. Possible values are: low, medium, high, hidden, none, unknownFutureValue. Required.
- `users` (Attributes) Users, groups, and roles included in and excluded from the policy. Either users or clientApplications is required. (see [below for nested schema](#nestedatt--conditions--users))

Optional:

- `authentication_flows` (Attributes) Authentication flows included in the policy scope. For more information, see Conditional Access: Authentication flows. (see [below for nested schema](#nestedatt--conditions--authentication_flows))
- `client_applications` (Attributes) Client applications (service principals and workload identities) included in and excluded from the policy. Either users or clientApplications is required. (see [below for nested schema](#nestedatt--conditions--client_applications))
- `device_states` (Attributes) Device states in the policy. To be deprecated and removed. Use the devices property instead. (see [below for nested schema](#nestedatt--conditions--device_states))
- `devices` (Attributes) Devices in the policy. (see [below for nested schema](#nestedatt--conditions--devices))
- `insider_risk_levels` (String) Insider risk levels included in the policy. The possible values are: minor, moderate, elevated, unknownFutureValue.
- `locations` (Attributes) Locations included in and excluded from the policy. (see [below for nested schema](#nestedatt--conditions--locations))
- `platforms` (Attributes) Platforms included in and excluded from the policy. (see [below for nested schema](#nestedatt--conditions--platforms))
- `service_principal_risk_levels` (List of String) Service principal risk levels included in the policy. Possible values are: low, medium, high, none, unknownFutureValue.

<a id="nestedatt--conditions--applications"></a>
### Nested Schema for `conditions.applications`

Optional:

- `application_filter` (Attributes) Filter that defines the dynamic-application-syntax rule to include/exclude cloud applications. A filter can use custom security attributes to include/exclude applications. (see [below for nested schema](#nestedatt--conditions--applications--application_filter))
- `exclude_applications` (List of String) List of application IDs explicitly excluded from the policy. Can be one of the following: The list of client IDs (appId) explicitly excluded from the policy, 'Office365' (For the list of apps included in Office365, see Apps included in Conditional Access Office 365 app suite), 'MicrosoftAdminPortals' (For more information, see Conditional Access Target resources: Microsoft Admin Portals).
- `include_applications` (List of String) List of application IDs the policy applies to, unless explicitly excluded. Can be one of the following: The list of client IDs (appId) the policy applies to, 'All', 'Office365' (For the list of apps included in Office365, see Apps included in Conditional Access Office 365 app suite), 'MicrosoftAdminPortals' (For more information, see Conditional Access Target resources: Microsoft Admin Portals).
- `include_authentication_context_class_references` (List of String) Authentication context class references include. Supported values are 'c1' through 'c25'.
- `include_user_actions` (List of String) User actions to include. Supported values are 'urn:user:registersecurityinfo' and 'urn:user:registerdevice'.

<a id="nestedatt--conditions--applications--application_filter"></a>
### Nested Schema for `conditions.applications.application_filter`

Required:

- `mode` (String) Mode to use for the filter. Possible values are include or exclude.
- `rule` (String) Rule syntax is similar to that used for membership rules for groups in Microsoft Entra ID.



<a id="nestedatt--conditions--users"></a>
### Nested Schema for `conditions.users`

Optional:

- `exclude_groups` (List of String) Group IDs excluded from scope of policy.
- `exclude_guests_or_external_users` (Attributes) Internal guests or external users excluded from the policy scope. Optionally populated. (see [below for nested schema](#nestedatt--conditions--users--exclude_guests_or_external_users))
- `exclude_roles` (List of String) Role IDs excluded from scope of policy.
- `exclude_users` (List of String) User IDs excluded from scope of policy and/or GuestsOrExternalUsers.
- `include_groups` (List of String) Group IDs in scope of policy unless explicitly excluded.
- `include_guests_or_external_users` (Attributes) Internal guests or external users included in the policy scope. Optionally populated. (see [below for nested schema](#nestedatt--conditions--users--include_guests_or_external_users))
- `include_roles` (List of String) Role IDs in scope of policy unless explicitly excluded.
- `include_users` (List of String) User IDs in scope of policy unless explicitly excluded, None, All, or GuestsOrExternalUsers.

<a id="nestedatt--conditions--users--exclude_guests_or_external_users"></a>
### Nested Schema for `conditions.users.exclude_guests_or_external_users`

Required:

- `guest_or_external_user_types` (String) Indicates internal guests or external user types. Possible values are: none, internalGuest, b2bCollaborationGuest, b2bCollaborationMember, b2bDirectConnectUser, otherExternalUser, serviceProvider, unknownFutureValue.

Optional:

- `external_tenants` (Attributes) The tenant IDs of the selected types of external users. (see [below for nested schema](#nestedatt--conditions--users--exclude_guests_or_external_users--external_tenants))

<a id="nestedatt--conditions--users--exclude_guests_or_external_users--external_tenants"></a>
### Nested Schema for `conditions.users.exclude_guests_or_external_users.external_tenants`

Required:

- `membership_kind` (String) Indicates the kind of membership. Possible values are: all, enumerated, unknownFutureValue.



<a id="nestedatt--conditions--users--include_guests_or_external_users"></a>
### Nested Schema for `conditions.users.include_guests_or_external_users`

Required:

- `guest_or_external_user_types` (String) Indicates internal guests or external user types. Possible values are: none, internalGuest, b2bCollaborationGuest, b2bCollaborationMember, b2bDirectConnectUser, otherExternalUser, serviceProvider, unknownFutureValue.

Optional:

- `external_tenants` (Attributes) The tenant IDs of the selected types of external users. (see [below for nested schema](#nestedatt--conditions--users--include_guests_or_external_users--external_tenants))

<a id="nestedatt--conditions--users--include_guests_or_external_users--external_tenants"></a>
### Nested Schema for `conditions.users.include_guests_or_external_users.external_tenants`

Required:

- `membership_kind` (String) Indicates the kind of membership. Possible values are: all, enumerated, unknownFutureValue.




<a id="nestedatt--conditions--authentication_flows"></a>
### Nested Schema for `conditions.authentication_flows`

Optional:

- `transfer_methods` (String) Represents the transfer methods in scope for the policy. The possible values are: none, deviceCodeFlow, authenticationTransfer, unknownFutureValue.


<a id="nestedatt--conditions--client_applications"></a>
### Nested Schema for `conditions.client_applications`

Optional:

- `exclude_service_principals` (List of String) Service principal IDs excluded from the policy scope.
- `include_service_principals` (List of String) Service principal IDs included in the policy scope, or 'ServicePrincipalsInMyTenant'.
- `service_principal_filter` (Attributes) Filter that defines the dynamic-servicePrincipal-syntax rule to include/exclude service principals. A filter can use custom security attributes to include/exclude service principals. (see [below for nested schema](#nestedatt--conditions--client_applications--service_principal_filter))

<a id="nestedatt--conditions--client_applications--service_principal_filter"></a>
### Nested Schema for `conditions.client_applications.service_principal_filter`

Required:

- `mode` (String) Mode to use for the filter. Possible values are include or exclude.
- `rule` (String) Rule syntax is similar to that used for membership rules for groups in Microsoft Entra ID.



<a id="nestedatt--conditions--device_states"></a>
### Nested Schema for `conditions.device_states`

Optional:

- `exclude_states` (List of String) States excluded from the scope of the policy. Possible values: 'Compliant', 'DomainJoined'.
- `include_states` (List of String) States in the scope of the policy. 'All' is the only allowed value.


<a id="nestedatt--conditions--devices"></a>
### Nested Schema for `conditions.devices`

Optional:

- `device_filter` (Attributes) Filter that defines the dynamic-device-syntax rule to include/exclude devices. A filter can use device properties (such as extension attributes) to include/exclude them. Cannot be set if includeDevices or excludeDevices is set. (see [below for nested schema](#nestedatt--conditions--devices--device_filter))
- `exclude_device_states` (List of String, Deprecated) (Deprecated) States excluded from the scope of the policy. Possible values: 'Compliant', 'DomainJoined'.
- `exclude_devices` (List of String) States excluded from the scope of the policy. Possible values: 'Compliant', 'DomainJoined'. Cannot be set if deviceFilter is set.
- `include_device_states` (List of String, Deprecated) (Deprecated) States in the scope of the policy. 'All' is the only allowed value.
- `include_devices` (List of String) States in the scope of the policy. 'All' is the only allowed value. Cannot be set if deviceFilter is set.

<a id="nestedatt--conditions--devices--device_filter"></a>
### Nested Schema for `conditions.devices.device_filter`

Required:

- `mode` (String) Mode to use for the filter. Possible values are include or exclude.
- `rule` (String) Rule syntax is similar to that used for membership rules for groups in Microsoft Entra ID.



<a id="nestedatt--conditions--locations"></a>
### Nested Schema for `conditions.locations`

Required:

- `include_locations` (List of String) Location IDs in scope of policy unless explicitly excluded, 'All', or 'AllTrusted'.

Optional:

- `exclude_locations` (List of String) Location IDs excluded from scope of policy.


<a id="nestedatt--conditions--platforms"></a>
### Nested Schema for `conditions.platforms`

Optional:

- `exclude_platforms` (List of String) Device platforms excluded from the policy scope.
- `include_platforms` (List of String) Device platforms included in the policy scope.



<a id="nestedatt--grant_controls"></a>
### Nested Schema for `grant_controls`

Required:

- `operator` (String) Defines the relationship of the grant controls. Possible values: AND, OR.

Optional:

- `authentication_strength` (Attributes) The authentication strength policy to be used in the grant controls. (see [below for nested schema](#nestedatt--grant_controls--authentication_strength))
- `built_in_controls` (List of String) List of values of built-in controls required by the policy. Possible values: block, mfa, compliantDevice, domainJoinedDevice, approvedApplication, compliantApplication, passwordChange, unknownFutureValue.
- `custom_authentication_factors` (List of String) List of custom controls IDs required by the policy. To learn more about custom control, see Custom controls (preview).
- `terms_of_use` (List of String) List of terms of use IDs required by the policy.

<a id="nestedatt--grant_controls--authentication_strength"></a>
### Nested Schema for `grant_controls.authentication_strength`

Optional:

- `allowed_combinations` (List of String) The allowed combinations for the authentication strength policy.
- `description` (String) The description of the authentication strength policy.
- `display_name` (String) The display name of the authentication strength policy.
- `id` (String) The identifier of the authentication strength policy.
- `policy_type` (String) The type of the authentication strength policy.
- `requirements_satisfied` (String) The requirements satisfied by the authentication strength policy.

Read-Only:

- `created_date_time` (String) The creation date and time of the authentication strength policy.
- `modified_date_time` (String) The last modified date and time of the authentication strength policy.



<a id="nestedatt--session_controls"></a>
### Nested Schema for `session_controls`

Optional:

- `application_enforced_restrictions` (Attributes) Session control to enforce application restrictions. Only Exchange Online and Sharepoint Online support this session control. (see [below for nested schema](#nestedatt--session_controls--application_enforced_restrictions))
- `cloud_app_security` (Attributes) Session control to apply cloud app security. (see [below for nested schema](#nestedatt--session_controls--cloud_app_security))
- `continuous_access_evaluation` (Attributes) Session control for continuous access evaluation settings. (see [below for nested schema](#nestedatt--session_controls--continuous_access_evaluation))
- `disable_resilience_defaults` (Boolean) Session control that determines whether it's acceptable for Microsoft Entra ID to extend existing sessions based on information collected prior to an outage or not.
- `persistent_browser` (Attributes) Session control to define whether to persist cookies or not. All apps should be selected for this session control to work correctly. (see [below for nested schema](#nestedatt--session_controls--persistent_browser))
- `secure_sign_in_session` (Attributes) Session control to require sign in sessions to be bound to a device. (see [below for nested schema](#nestedatt--session_controls--secure_sign_in_session))
- `sign_in_frequency` (Attributes) Session control to enforce signin frequency. (see [below for nested schema](#nestedatt--session_controls--sign_in_frequency))

<a id="nestedatt--session_controls--application_enforced_restrictions"></a>
### Nested Schema for `session_controls.application_enforced_restrictions`

Required:

- `is_enabled` (Boolean) Specifies whether the session control is enabled.


<a id="nestedatt--session_controls--cloud_app_security"></a>
### Nested Schema for `session_controls.cloud_app_security`

Required:

- `cloud_app_security_type` (String) Possible values are: mcasConfigured, monitorOnly, blockDownloads, unknownFutureValue.
- `is_enabled` (Boolean) Specifies whether the session control is enabled.


<a id="nestedatt--session_controls--continuous_access_evaluation"></a>
### Nested Schema for `session_controls.continuous_access_evaluation`

Required:

- `mode` (String) Specifies continuous access evaluation settings. The possible values are: strictEnforcement, disabled, unknownFutureValue, strictLocation. Note that you must use the Prefer: include-unknown-enum-members request header to get the strictLocation value in this evolvable enum.


<a id="nestedatt--session_controls--persistent_browser"></a>
### Nested Schema for `session_controls.persistent_browser`

Required:

- `is_enabled` (Boolean) Specifies whether the session control is enabled.
- `mode` (String) Possible values are: always, never.


<a id="nestedatt--session_controls--secure_sign_in_session"></a>
### Nested Schema for `session_controls.secure_sign_in_session`

Required:

- `is_enabled` (Boolean) Specifies whether the session control is enabled.


<a id="nestedatt--session_controls--sign_in_frequency"></a>
### Nested Schema for `session_controls.sign_in_frequency`

Required:

- `authentication_type` (String) The possible values are: primaryAndSecondaryAuthentication, secondaryAuthentication, unknownFutureValue.
- `frequency_interval` (String) The possible values are: timeBased, everyTime, unknownFutureValue.
- `is_enabled` (Boolean) Specifies whether the session control is enabled.
- `type` (String) Possible values are: days, hours.
- `value` (Number) The number of days or hours.



<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
- `delete` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Setting a timeout for a Delete operation is only applicable if changes are saved into state before the destroy operation occurs.
- `read` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours). Read operations occur during any refresh or planning operation when refresh is enabled.
- `update` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).
