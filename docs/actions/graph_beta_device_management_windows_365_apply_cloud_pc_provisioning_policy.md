---
page_title: "microsoft365_graph_beta_device_management_windows_365_apply_cloud_pc_provisioning_policy Action - terraform-provider-microsoft365"
subcategory: "Device Management"

description: |-
  Applies configuration settings to a Cloud PC provisioning policy in Microsoft Intune using the /deviceManagement/virtualEndpoint/provisioningPolicies/{id}/apply endpoint. This action is used to apply region or single sign-on settings to existing Cloud PCs that were provisioned with this policy. When you change the network, image, region, or single sign-on configuration in a provisioning policy, the changes only apply to newly provisioned or reprovisioned Cloud PCs. Use this action to apply region or single sign-on changes to previously provisioned Cloud PCs.
---

# microsoft365_graph_beta_device_management_windows_365_apply_cloud_pc_provisioning_policy (Action)

Applies configuration settings to a Cloud PC provisioning policy in Microsoft Intune using the `/deviceManagement/virtualEndpoint/provisioningPolicies/{id}/apply` endpoint. This action is used to apply region or single sign-on settings to existing Cloud PCs that were provisioned with this policy. When you change the network, image, region, or single sign-on configuration in a provisioning policy, the changes only apply to newly provisioned or reprovisioned Cloud PCs. Use this action to apply region or single sign-on changes to previously provisioned Cloud PCs.

## Microsoft Documentation

- [applyCloudPcProvisioningPolicy action](https://learn.microsoft.com/en-us/graph/api/cloudpcprovisioningpolicy-apply?view=graph-rest-beta&tabs=http)

## Microsoft Graph API Permissions

The following client `application` permissions are needed in order to use this action:

**Required:**
- `CloudPC.ReadWrite.All`

**Optional:**
- `None` `[N/A]`

## Version History

| Version | Status | Notes |
|---------|--------|-------|
| v0.33.0-alpha | Experimental | Initial release |
| v0.40.0-alpha | Experimental | Example fixes and refactored sync progress logic |


## Example Usage

```terraform
# Example 1: Apply Cloud PC provisioning policy - Minimal
action "microsoft365_graph_beta_device_management_windows_365_apply_cloud_pc_provisioning_policy" "apply_policy" {
  config {
    provisioning_policy_id = "12345678-1234-1234-1234-123456789abc"
  }
}

# Example 2: Apply Cloud PC provisioning policy with timeout
action "microsoft365_graph_beta_device_management_windows_365_apply_cloud_pc_provisioning_policy" "apply_with_timeout" {
  config {
    provisioning_policy_id = "12345678-1234-1234-1234-123456789abc"

    timeouts = {
      invoke = "10m"
    }
  }
}

# Example 3: Apply Cloud PC provisioning policy with all options - Maximal
action "microsoft365_graph_beta_device_management_windows_365_apply_cloud_pc_provisioning_policy" "apply_maximal" {
  config {
    provisioning_policy_id = "12345678-1234-1234-1234-123456789abc"
    policy_settings        = "singleSignOn"
    reserve_percentage     = 50
    validate_policy_exists = true

    timeouts = {
      invoke = "5m"
    }
  }
}

# Example 4: Apply provisioning policy from data source
data "microsoft365_graph_beta_device_management_cloud_pc_provisioning_policy" "standard_policy" {
  filter_type  = "display_name"
  filter_value = "Standard User Policy"
}

action "microsoft365_graph_beta_device_management_windows_365_apply_cloud_pc_provisioning_policy" "apply_from_data" {
  config {
    provisioning_policy_id = data.microsoft365_graph_beta_device_management_cloud_pc_provisioning_policy.standard_policy.id

    validate_policy_exists = true

    timeouts = {
      invoke = "10m"
    }
  }
}

# Example 5: Apply policy with custom reserve percentage
action "microsoft365_graph_beta_device_management_windows_365_apply_cloud_pc_provisioning_policy" "apply_with_reserve" {
  config {
    provisioning_policy_id = "12345678-1234-1234-1234-123456789abc"
    reserve_percentage     = 25

    timeouts = {
      invoke = "5m"
    }
  }
}

# Output examples
output "applied_policy_id" {
  value       = action.microsoft365_graph_beta_device_management_windows_365_apply_cloud_pc_provisioning_policy.apply_policy.config.provisioning_policy_id
  description = "The provisioning policy ID that was applied"
}
```

<!-- action schema generated by tfplugindocs -->
## Schema

### Required

- `provisioning_policy_id` (String) The unique identifier of the Cloud PC provisioning policy to apply settings to. This is the ID of the provisioning policy in Microsoft Intune.

### Optional

- `policy_settings` (String) The target property of the apply action. Valid values are:
- `region`: Apply region configuration changes to existing Cloud PCs (default)
- `singleSignOn`: Apply single sign-on configuration changes to existing Cloud PCs

The default value is `region`. This action applies region as a value if this parameter is null.
Note: Network and image changes cannot be applied retrospectively and require reprovisioning.
- `reserve_percentage` (Number) For Frontline shared Cloud PCs only. The percentage of Cloud PCs to keep available. Administrators can set this property to a value from 0 to 99. Cloud PCs are reprovisioned only when there are no active and connected Cloud PC users. This parameter is only applicable for Frontline shared provisioning policies.
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))
- `validate_policy_exists` (Boolean) When set to `true` (default), the action will validate that the provisioning policy exists and check the provisioning type if reserve_percentage is specified before attempting to apply settings. When `false`, policy validation is skipped and the action will attempt to apply settings directly. Disabling validation can improve performance but may result in errors if the policy doesn't exist or is the wrong type.

<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `invoke` (String) A string that can be [parsed as a duration](https://pkg.go.dev/time#ParseDuration) consisting of numbers and unit suffixes, such as "30s" or "2h45m". Valid time units are "s" (seconds), "m" (minutes), "h" (hours).