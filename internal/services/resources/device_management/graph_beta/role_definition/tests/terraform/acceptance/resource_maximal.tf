resource "microsoft365_graph_beta_device_management_role_definition" "test" {
  display_name                = "Test Acceptance Custom Role Definition - Updated"
  description                 = "Updated custom description for acceptance testing"
  is_built_in_role_definition = false
  is_built_in                 = false
  role_scope_tag_ids          = ["0", "1"]

  role_permissions = [
    {
      allowed_resource_actions = [
        "Microsoft.Intune_Audit_Read",
        "Microsoft.Intune_CorporateDeviceIdentifiers_Create",
        "Microsoft.Intune_EnrollmentProgramToken_Create",
        "Microsoft.Intune_ManagedDevices_Update",
        "Microsoft.Intune_AssignmentFilter_Read",
        "Microsoft.Intune_DeviceCompliancePolices_Assign",
        "Microsoft.Intune_MicrosoftTunnelGateway_Create",
        "Microsoft.Intune_ManagedDevices_Delete",
        "Microsoft.Intune_MicrosoftTunnelGateway_Delete",
        "Microsoft.Intune_AppleEnrollmentProfiles_Assign",
        "Microsoft.Intune_ManagedGooglePlay_Read",
        "Microsoft.Intune_CorporateDeviceIdentifiers_Update",
        "Microsoft.Intune_AndroidSync_UpdateApps",
        "Microsoft.Intune_DeviceCompliancePolices_Delete",
        "Microsoft.Intune_AppleEnrollmentProfiles_Delete",
        "Microsoft.Intune_MicrosoftStoreForBusiness_Read",
        "Microsoft.Intune_DeviceCompliancePolices_Update",
        "Microsoft.Intune_MicrosoftTunnelGateway_Update",
        "Microsoft.Intune_RemoteAssistanceApp_ViewScreen",
        "Microsoft.Intune_EnrollmentProgramToken_Update",
        "Microsoft.Intune_AppleEnrollmentProfiles_Create",
        "Microsoft.Intune_ManagedDevices_SetPrimaryUser",
        "Microsoft.Intune_AppleEnrollmentProfiles_Update",
        "Microsoft.Intune_RemoteTasks_ActivateDeviceEsim",
        "Microsoft.Intune_AppleDeviceSerialNumbers_Read",
        "Microsoft.Intune_EndpointAnalytics_Read",
        "Microsoft.Intune_CorporateDeviceIdentifiers_Delete",
        "Microsoft.Intune_RemoteTasks_CustomNotification",
        "Microsoft.Intune_RemoteTasks_PlayLostModeSound",
        "Microsoft.Intune_RemoteTasks_DeviceLogs",
        "Microsoft.Intune_RemoteTasks_RebootNow",
        "Microsoft.Intune_RemoteTasks_RemoteLock",
        "Microsoft.Intune_RemoteTasks_RevokeAppleVppLicenses",
        "Microsoft.Intune_RemoteTasks_RotateFileVaultKey",
        "Microsoft.Intune_RemoteTasks_SyncDevice",
        "Microsoft.Intune_AssignmentFilter_Create",
        "Microsoft.Intune_RemoteTasks_EnableWindowsIntuneAgent",
        "Microsoft.Intune_Roles_Create",
        "Microsoft.Intune_DerivedCredentials_Read",
        "Microsoft.Intune_EndpointAnalytics_Create",
        "Microsoft.Intune_Roles_Read",
        "Microsoft.Intune_RemoteAssistanceApp_Elevation",
        "Microsoft.Intune_MobileApps_ViewReports",
        "Microsoft.Intune_RemoteAssistance_Read",
        "Microsoft.Intune_EnrollmentProgramToken_Delete",
        "Microsoft.Intune_PartnerDeviceManagement_Modify",
        "Microsoft.Intune_DeviceCompliancePolices_Create",
        "Microsoft.Intune_DeviceEnrollmentManagers_Read",
        "Microsoft.Intune_SecurityBaselines_Delete",
        "Microsoft.Intune_RemoteTasks_LocateDevice",
        "Microsoft.Intune_RemoteTasks_ConfigurationManagerAction",
        "Microsoft.Intune_Organization_Read",
        "Microsoft.Intune_RemoteTasks_ResetPasscode",
        "Microsoft.Intune_SecurityBaselines_Read",
        "Microsoft.Intune_Roles_Delete",
        "Microsoft.Intune_EndpointAnalytics_Delete",
        "Microsoft.Intune_TelecomExpenses_Update",
        "Microsoft.Intune_Roles_Update",
        "Microsoft.Intune_RemoteAssistance_Update",
        "Microsoft.Intune_EndpointAnalytics_Update",
        "Microsoft.Intune_EndpointProtection_Read",
        "Microsoft.Intune_AssignmentFilter_Delete",
        "Microsoft.Intune_AssignmentFilter_Update",
        "Microsoft.Intune_MobileThreatDefense_Read",
        "Microsoft.Intune_RemoteAssistanceApp_TakeFullControl",
        "Microsoft.Intune_DeviceCompliancePolices_ViewReports",
        "Microsoft.Intune_PolicySets_Assign",
        "Microsoft.Intune_ManagedApps_Delete",
        "Microsoft.Intune_PolicySets_Create",
        "Microsoft.Intune_PolicySets_Update",
        "Microsoft.Intune_DeviceConfigurations_Read",
        "Microsoft.Intune_TermsAndConditions_Create",
        "Microsoft.Intune_AppleDeviceSerialNumbers_Delete",
        "Microsoft.Intune_AppleDeviceSerialNumbers_Update",
        "Microsoft.Intune_ManagedDevices_Read",
        "Microsoft.Intune_AppleDeviceSerialNumbers_Create",
        "Microsoft.Intune_Organization_Create",
        "Microsoft.Intune_Customization_Create",
        "Microsoft.Intune_RemoteTasks_GetFileVaultKey",
        "Microsoft.Intune_RemoteTasks_WindowsDefender",
        "Microsoft.Intune_RemoteTasks_RemoveDFCIManagement",
        "Microsoft.Intune_CloudAttach_ResourceExplorer",
        "Microsoft.Intune_CloudAttach_Timeline",
        "Microsoft.Intune_CloudAttach_Collections",
        "Microsoft.Intune_ManagedDeviceCleanupSettings_Update",
        "Microsoft.Intune_MultiAdminApproval_DeleteAccessPolicy",
        "Microsoft.Intune_MultiAdminApproval_UpdateAccessPolicy",
        "Microsoft.Intune_ServiceNow_UpdateConnector",
        "Microsoft.Intune_ServiceNow_ViewIncidents",
        "Microsoft.Intune_RemoteAssistanceApp_Unattended",
        "Microsoft.Intune_RemoteTasks_InitiateDeviceAttestation",
        "Microsoft.Intune_ManagedDevices_ReadBiosPassword",
        "Microsoft.Intune_EpmPolicy_ViewElevationRequests",
        "Microsoft.Intune_EpmPolicy_ModifyElevationRequests",
        "Microsoft.Intune_ManagedDeviceCleanupRule_Update",
        "Microsoft.Intune_ASRPolicy_ViewReports",
        "Microsoft.Intune_EDRPolicy_ViewReports",
        "Microsoft.Intune_EDRPolicy_Delete",
        "Microsoft.Intune_EDRPolicy_Assign",
        "Microsoft.Intune_ASRPolicy_Update",
        "Microsoft.Intune_ASRPolicy_Assign",
        "Microsoft.Intune_ASRPolicy_Delete",
        "Microsoft.Intune_EDRPolicy_Read",
        "Microsoft.Intune_AppControlPolicy_Assign",
        "Microsoft.Intune_AppleEnrollmentProfiles_RotateAppleAdminAccountPassword",
        "Microsoft.Intune_TermsAndConditions_Delete",
        "Microsoft.Intune_MobileApps_Read",
        "Microsoft.Intune_AndroidSync_Read",
        "Microsoft.Intune_ManagedApps_Read",
        "Microsoft.Intune_ChromebookSync_UpdateOnboarding",
        "Microsoft.Intune_ChromebookSync_DeleteOnboarding",
        "Microsoft.Intune_Organization_Update",
        "Microsoft.Intune_MicrosoftStoreForBusiness_Modify",
        "Microsoft.Intune_Organization_Delete",
        "Microsoft.Intune_ChromebookSync_Read",
        "Microsoft.Intune_RemoteTasks_CleanPC",
        "Microsoft.Intune_RemoteTasks_ShutDown",
        "Microsoft.Intune_SecurityTasks_Update",
        "Microsoft.Intune_TelecomExpenses_Read",
        "Microsoft.Intune_AndroidFota_Delete",
        "Microsoft.Intune_AndroidFota_Assign",
        "Microsoft.Intune_QuietTimePolicies_Create",
        "Microsoft.Intune_CloudAttach_Scripts",
        "Microsoft.Intune_CloudAttach_SoftwareUpdates",
        "Microsoft.Intune_OrganizationalMessages_Read",
        "Microsoft.Intune_OrganizationalMessages_Create",
        "Microsoft.Intune_RemoteTasks_OnDemandProactiveRemediation",
        "Microsoft.Intune_MultiAdminApproval_ReadAccessPolicy",
        "Microsoft.Intune_EpmPolicy_ViewReports",
        "Microsoft.Intune_OrganizationalMessages_UpdateControl",
        "Microsoft.Intune_RemoteTasks_PauseConfigurationRefresh",
        "Microsoft.Intune_CloudPki_Read",
        "Microsoft.Intune_TermsAndConditions_Read",
        "Microsoft.Intune_SecurityBaselines_Create",
        "Microsoft.Intune_ManagedGooglePlay_Modify",
        "Microsoft.Intune_SecurityBaselines_Update",
        "Microsoft.Intune_SecurityBaselines_Assign",
        "Microsoft.Intune_RemoteTasks_ManageSharedDeviceUsers",
        "Microsoft.Intune_RemoteTasks_RequestRemoteAssistance",
        "Microsoft.Intune_MobileApps_Delete",
        "Microsoft.Intune_ManagedApps_Assign",
        "Microsoft.Intune_MobileApps_Create",
        "Microsoft.Intune_RemoteTasks_Retire",
        "Microsoft.Intune_TermsAndConditions_Update",
        "Microsoft.Intune_DerivedCredentials_Modify",
        "Microsoft.Intune_MicrosoftDefenderATP_Read",
        "Microsoft.Intune_CertificateConnector_Read",
        "Microsoft.Intune_RemoteTasks_EnableLostMode",
        "Microsoft.Intune_PolicySets_Read",
        "Microsoft.Intune_ManagedApps_Wipe",
        "Microsoft.Intune_DeviceCompliancePolices_Read",
        "Microsoft.Intune_DeviceConfigurations_Assign",
        "Microsoft.Intune_AppleEnrollmentProfiles_Read",
        "Microsoft.Intune_Customization_Update",
        "Microsoft.Intune_PartnerDeviceManagement_Read",
        "Microsoft.Intune_DeviceConfigurations_Create",
        "Microsoft.Intune_EnrollmentProgramToken_Read",
        "Microsoft.Intune_AndroidSync_UpdateOnboarding",
        "Microsoft.Intune_RemoteTasks_DisableLostMode",
        "Microsoft.Intune_RemoteTasks_RotateBitLockerKeys",
        "Microsoft.Intune_MobileApps_Relate",
        "Microsoft.Intune_AndroidFota_Create",
        "Microsoft.Intune_QuietTimePolicies_Update",
        "Microsoft.Intune_CloudAttach_ScriptActions",
        "Microsoft.Intune_RemoteTasks_InitiateMDMKeyRecovery",
        "Microsoft.Intune_RemoteTasks_RotateLocalAdminPassword",
        "Microsoft.Intune_EpmPolicy_Read",
        "Microsoft.Intune_TenantAttachRecommendations_Read",
        "Microsoft.Intune_AndroidSync_UpdateEnrollmentProfiles",
        "Microsoft.Intune_ManagedDevices_Query",
        "Microsoft.Intune_AppControlPolicy_Read",
        "Microsoft.Intune_EDRPolicy_Update",
        "Microsoft.Intune_AppControlPolicy_ViewReports",
        "Microsoft.Intune_AppControlPolicy_Create",
        "Microsoft.Intune_AndroidSync_AndroidEnrollmentTimeMembershipAssign",
        "Microsoft.Intune_MultiAdminApproval_ApprovalForMultiAdminApproval",
        "Microsoft.Intune_AppleEnrollmentProfiles_ViewAppleAdminAccountPassword",
        "Microsoft.Intune_WindowsEnterpriseCertificate_Modify",
        "Microsoft.Intune_MobileApps_Assign",
        "Microsoft.Intune_ManagedApps_Update",
        "Microsoft.Intune_PolicySets_Delete",
        "Microsoft.Intune_ManagedApps_Create",
        "Microsoft.Intune_SecurityTasks_Read",
        "Microsoft.Intune_MobileThreatDefense_Modify",
        "Microsoft.Intune_RemoteTasks_Wipe",
        "Microsoft.Intune_DeviceConfigurations_ViewReports",
        "Microsoft.Intune_CorporateDeviceIdentifiers_Read",
        "Microsoft.Intune_Customization_Assign",
        "Microsoft.Intune_DeviceEnrollmentManagers_Update",
        "Microsoft.Intune_MicrosoftTunnelGateway_Read",
        "Microsoft.Intune_RemoteTasks_BypassActivationLock",
        "Microsoft.Intune_DeviceConfigurations_Update",
        "Microsoft.Intune_RemoteTasks_UpdateDeviceAccount",
        "Microsoft.Intune_AndroidFota_Read",
        "Microsoft.Intune_QuietTimePolicies_Delete",
        "Microsoft.Intune_QuietTimePolicies_Assign",
        "Microsoft.Intune_QuietTimePolicies_Read",
        "Microsoft.Intune_CloudAttach_CMPivot",
        "Microsoft.Intune_EpmPolicy_Create",
        "Microsoft.Intune_WindowsEnterpriseCertificate_Read",
        "Microsoft.Intune_Roles_Assign",
        "Microsoft.Intune_Reports_Read",
        "Microsoft.Intune_MobileApps_Update",
        "Microsoft.Intune_Customization_Read",
        "Microsoft.Intune_ManagedDevices_ViewReports",
        "Microsoft.Intune_RemoteTasks_SetDeviceName",
        "Microsoft.Intune_TermsAndConditions_Assign",
        "Microsoft.Intune_CertificateConnector_Modify",
        "Microsoft.Intune_DeviceConfigurations_Delete",
        "Microsoft.Intune_RemoteAssistance_ViewReports",
        "Microsoft.Intune_Customization_Delete",
        "Microsoft.Intune_AndroidFota_Update",
        "Microsoft.Intune_QuietTimePolicies_ViewReports",
        "Microsoft.Intune_CloudAttach_ApplicationActions",
        "Microsoft.Intune_CloudAttach_ClientDetails",
        "Microsoft.Intune_CloudAttach_Applications",
        "Microsoft.Intune_OrganizationalMessages_Delete",
        "Microsoft.Intune_OrganizationalMessages_Update",
        "Microsoft.Intune_CloudAttach_EnrollNow",
        "Microsoft.Intune_MultiAdminApproval_CreateAccessPolicy",
        "Microsoft.Intune_EpmPolicy_Assign",
        "Microsoft.Intune_EpmPolicy_Update",
        "Microsoft.Intune_EpmPolicy_Delete",
        "Microsoft.Intune_OrganizationalMessages_Assign",
        "Microsoft.Intune_WindowsOSRecovery_Assign",
        "Microsoft.Intune_EDRPolicy_Create",
        "Microsoft.Intune_AppControlPolicy_Delete",
        "Microsoft.Intune_DeviceConfigurations_UpdateWindowsRestore",
        "Microsoft.Intune_WindowsOSRecovery_Delete",
        "Microsoft.Intune_CloudPki_Update",
        "Microsoft.Intune_EnrollmentProfiles_EnrollmentTimeMembershipAssign",
        "Microsoft.Intune_ASRPolicy_Create",
        "Microsoft.Intune_ASRPolicy_Read",
        "Microsoft.Intune_AppControlPolicy_Update",
        "Microsoft.Intune_WindowsOSRecovery_Update",
        "Microsoft.Intune_WindowsOSRecovery_Create",
        "Microsoft.Intune_WindowsOSRecovery_Read",
        "Microsoft.Intune_CloudPki_Revoke",
        "Microsoft.Intune_CloudPki_Create",
        "Microsoft.Intune_RemoteTasks_ChangeAssignments",
        "Microsoft.Intune_RemoteTasks_Offboard",
        "Microsoft.Intune_EnrollmentProgramToken_ReleaseADEDevices"
      ]
    }
  ]

  timeouts = {
    create = "180s"
    read   = "180s"
    update = "180s"
    delete = "180s"
  }
}